import{jsxs as e,jsx as t,Fragment as n}from"react/jsx-runtime";import{createContext as r,useContext as o,useState as i,useRef as a,useEffect as l,useMemo as s,useCallback as c}from"react";import d from"object-property-assigner";export{default as assign}from"object-property-assigner";import u from"object-property-extractor";export{default as extract}from"object-property-extractor";function p(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function g(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const h=({className:n,name:r,value:o,setValue:i,handleKeyPress:a,styles:l,textAreaRef:s})=>{if("string"!=typeof o)return null;const c="\n"===o.slice(-1)?o+".":o;return e("div",{style:{display:"grid"},children:[t("textarea",{id:`${r}_textarea`,ref:s,style:Object.assign({height:"auto",gridArea:"1 / 1 / 2 / 2",overflowY:"auto",whiteSpace:"pre-wrap"},l),rows:1,className:n,name:`${r}_textarea`,value:o,onChange:e=>i(e.target.value),autoFocus:!0,onFocus:e=>{o.length<40&&e.target.select()},onKeyDown:a}),t("span",{className:n,style:Object.assign({visibility:"hidden",height:"auto",gridArea:"1 / 1 / 2 / 2",color:"red",opacity:.9,whiteSpace:"pre-wrap",overflowY:"auto",border:"1px solid transparent"},l),children:c})]})},m=e=>null!==e&&"object"==typeof e,y=(e,t,n,r="")=>{if(!n&&!r)return!0;switch(e){case"collection":if(n){if(n(t,r))return!0;if(!f(r,t,n))return!1}if(!n&&r&&!f(r,t))return!1;break;case"value":if(n&&!n(t,r))return!1;if(!n&&r&&!b(t,r))return!1}return!0},f=(e="",t,n=b)=>{const r=t.value;return Object.entries(r).some((([o,i])=>{const a=[...t.path,o],l=Object.assign(Object.assign({},t),{key:o,path:a,level:t.level+1,value:i,size:a.length,parentData:r});return m(i)?f(e,l,n):n(l,e)}))},b=(e,t="")=>{const{value:n}=e;if(null===n&&"null".includes(t.toLowerCase()))return!0;switch(typeof n){case"string":return n.toLowerCase().includes(t.toLowerCase());case"number":return!!String(n).includes(t);case"boolean":return n?"true".includes(t.toLowerCase())||"1"===t:"false".includes(t.toLowerCase())||"0"===t;default:return!1}},v=({key:e,path:t},n="")=>!!b({value:e},n)||!!t.some((e=>b({value:e},n))),j=(e,t)=>(null!=t?t:"")+e.map((e=>""===e?String.fromCharCode(0):e)).join("."),E=e=>e.shiftKey?"Shift":e.metaKey?"Meta":e.ctrlKey?"Control":e.altKey?"Alt":void 0,w=(e,t,n)=>{const r=e.key,o=E(e);if(Array.isArray(t))return!!o&&t.includes(o);const{key:i,modifier:a}=t;return("stringLineBreak"!==n||"Enter"!==r||"Shift"!==o||"Enter"!==i||!(null==a?void 0:a.includes("Shift")))&&(r===i&&(a===o||Array.isArray(a)&&a.includes(o)))},D={key:"Enter"},C={confirm:D,cancel:{key:"Escape"},objectConfirm:Object.assign(Object.assign({},D),{modifier:["Meta","Shift","Control"]}),objectLineBreak:D,stringConfirm:D,stringLineBreak:Object.assign(Object.assign({},D),{modifier:["Shift"]}),numberConfirm:D,numberUp:{key:"ArrowUp"},numberDown:{key:"ArrowDown"},tabForward:{key:"Tab"},tabBack:{key:"Tab",modifier:"Shift"},booleanConfirm:D,booleanToggle:{key:" "},clipboardModifier:["Meta","Control"],collapseModifier:["Alt"]},k=(e,t,n="next",r)=>{const o=t.slice(0,t.length-1),i=t.slice(-1)[0];if(void 0===i)return null;const a=u(e,o),l=S(a);Array.isArray(a)||r(l,(({key:e,value:t})=>[e,t]));const s=l.findIndex((e=>e.key===i)),c=l[s+("next"===n?1:-1)];return c?m(c.value)?0===Object.keys(c.value).length?k(e,[...o,c.key],n,r):O(e,[...o,c.key],n,r):[...o,c.key]:0===o.length?null:k(e,o,n,r)},O=(e,t,n="next",r)=>{const o=u(e,t);if(!m(o))return t;const i=Array.isArray(o)?o.map(((e,t)=>t)):Object.keys(o);r(i,(e=>[e,o]));const a="next"===n?i[0]:i[i.length-1];return O(e,[...t,a],n,r)},S=e=>Array.isArray(e)?e.map(((e,t)=>({index:t,value:e,key:t}))):Object.entries(e).map((([e,t],n)=>({key:e,value:t,index:n}))),N=(e,t)=>{var n,r,o,i;const a=e.current,l=null!==(n=null==a?void 0:a.selectionStart)&&void 0!==n?n:1/0,s=null!==(r=null==a?void 0:a.selectionEnd)&&void 0!==r?r:1/0,c=(null===(o=null==a?void 0:a.textContent)||void 0===o?void 0:o.slice(0,l))+t+(null===(i=null==a?void 0:a.textContent)||void 0===i?void 0:i.slice(s));return a.value=c,null==a||a.setSelectionRange(l+1,l+1),c},x={displayName:"Default",fragments:{edit:"rgb(42, 161, 152)"},styles:{container:{backgroundColor:"#f6f6f6",fontFamily:"monospace"},collection:{},collectionInner:{},collectionElement:{},dropZone:{},property:"#292929",bracket:{color:"rgb(0, 43, 54)",fontWeight:"bold"},itemCount:{color:"rgba(0, 0, 0, 0.3)",fontStyle:"italic"},string:"rgb(203, 75, 22)",number:"rgb(38, 139, 210)",boolean:"green",null:{color:"rgb(220, 50, 47)",fontVariant:"small-caps",fontWeight:"bold"},input:["#292929"],inputHighlight:"#b3d8ff",error:{fontSize:"0.8em",color:"red",fontWeight:"bold"},iconCollection:"rgb(0, 43, 54)",iconEdit:"edit",iconDelete:"rgb(203, 75, 22)",iconAdd:"edit",iconCopy:"rgb(38, 139, 210)",iconOk:"green",iconCancel:"rgb(203, 75, 22)"}},A=r({getStyles:()=>({}),icons:{}}),T=({theme:e=x,icons:n={},docRoot:r,children:o})=>{const i=K(e,r);return t(A.Provider,{value:{getStyles:(e,t)=>"function"==typeof i[e]?i[e](t):i[e],icons:n},children:o})},R=()=>o(A),K=(e,t)=>{var n,r,o,i;const a={},l=(Array.isArray(e)?e:[e]).map((e=>V(e)?P({fragments:{},styles:e},a):P(e,a))),s=P(x,{});Object.keys(s).forEach((e=>{const t=e;l.forEach((e=>{e[t]&&(s[t]=Object.assign(Object.assign({},s[t]),e[t]))}))}));const c=Object.assign({},s);return Object.entries(a).forEach((([e,t])=>{const n=e;c[n]=e=>{const r=t(e)||{};return Object.assign(Object.assign({},s[n]),r)}})),"function"!=typeof(null==c?void 0:c.inputHighlight)&&(null===(n=null==c?void 0:c.inputHighlight)||void 0===n?void 0:n.backgroundColor)&&t.style.setProperty("--jer-highlight-color",null===(r=null==c?void 0:c.inputHighlight)||void 0===r?void 0:r.backgroundColor),"function"!=typeof(null==c?void 0:c.iconCopy)&&(null===(o=null==c?void 0:c.iconCopy)||void 0===o?void 0:o.color)&&t.style.setProperty("--jer-icon-copy-color",null===(i=null==c?void 0:c.iconCopy)||void 0===i?void 0:i.color),c},P=(e,t)=>{const{fragments:n,styles:r}=e,o={};return Object.entries(r).forEach((([e,r])=>{const i=(Array.isArray(r)?r:[r]).reduce(((r,o)=>{var i,a;if("function"==typeof o)return t[e]=o,Object.assign({},r);if("string"==typeof o){const t=null!==(i=null==n?void 0:n[o])&&void 0!==i?i:o;return"string"==typeof t?Object.assign(Object.assign({},r),{[null!==(a=z[e])&&void 0!==a?a:"color"]:t}):Object.assign(Object.assign({},r),t)}return Object.assign(Object.assign({},r),o)}),{});o[e]=i})),o},V=e=>!("styles"in e),z={container:"backgroundColor",collection:"backgroundColor",collectionInner:"backgroundColor",collectionElement:"backgroundColor",dropZone:"borderColor",inputHighlight:"backgroundColor"},_=r(null),F=({children:e,onEditEvent:n,onCollapse:r})=>{const[o,l]=i(null),[s,c]=i(null),[d,u]=i(null),[p,g]=i({path:null,pathString:null}),h=a(null),m=a("next"),y=a(null);return t(_.Provider,{value:{collapseState:o,setCollapseState:e=>{l(e),r&&null!==e&&(Array.isArray(e)?e.forEach((e=>r(e))):r(e)),null!==e&&setTimeout((()=>l(null)),2e3)},getMatchingCollapseState:e=>{if(Array.isArray(o)){for(const t of o)if(L(e,t))return t;return null}return L(e,o)?o:null},currentlyEditingElement:s,setCurrentlyEditingElement:(e,t)=>{const r="string"==typeof e||null===e?e:j(e,"key"===t?"key_":void 0);null!==s&&null!==r&&null!==h.current&&h.current(),c(r),n&&n(e,"key"===t),h.current="function"==typeof t?t:null},areChildrenBeingEdited:e=>null!==s&&s.includes(e),previouslyEditedElement:y.current,setPreviouslyEditedElement:e=>{y.current=e},tabDirection:m.current,setTabDirection:e=>{m.current=e},previousValue:d,setPreviousValue:u,dragSource:p,setDragSource:g},children:e})},M=()=>{const e=o(_);if(!e)throw new Error("Missing Context Provider");return e},L=(e,t)=>{if(null===t)return!1;if(!t.includeChildren)return t.path.every(((t,n)=>e[n]===t))&&t.path.length===e.length;for(const[n,r]of t.path.entries())if(r!==e[n])return!1;return!0},I="**INVALID_FUNCTION**",B=({nodeData:r,showStringQuotes:o=!0,stringTruncate:a=200,pathString:l,canEdit:s,setIsEditing:c,styles:d,translate:u})=>{const p=r.value,[g,h]=i(!1),m=o?'"':"",y=p.length>a,f=()=>{s?c(!0):h(!g)};return e("div",{id:`${l}_display`,onDoubleClick:f,onClick:e=>{(e.getModifierState("Control")||e.getModifierState("Meta"))&&f()},className:"jer-value-string",style:d,children:[m,y?e(n,g?{children:[e("span",{children:[p,m]}),e("span",{className:"jer-string-expansion jer-show-less",onClick:()=>h(!1),children:[" ",u("SHOW_LESS",r)]})]}:{children:[t("span",{children:p.slice(0,a-2).trimEnd()}),t("span",{className:"jer-string-expansion jer-ellipsis",onClick:()=>h(!0),children:"..."}),m]}):`${p}${m}`]})},W=n=>{var{value:r,setValue:o,isEditing:i,path:l,handleEdit:s,nodeData:c,handleKeyboard:d,keyboardCommon:u,enumType:g}=n,m=p(n,["value","setValue","isEditing","path","handleEdit","nodeData","handleKeyboard","keyboardCommon","enumType"]);const{getStyles:y}=R(),f=a(null),b=j(l);return i&&g?e("div",{className:"jer-select jer-select-enums",children:[t("select",{name:`${b}-value-select`,className:"jer-select-inner",onChange:e=>o(e.target.value),value:r,autoFocus:!0,onKeyDown:e=>{d(e,Object.assign({stringConfirm:s},u))},children:g.values.map((e=>t("option",{value:e,children:e},e)))}),t("span",{className:"focus"})]}):i?t(h,{className:"jer-input-text",textAreaRef:f,name:b,value:r,setValue:o,isEditing:i,handleKeyPress:e=>{d(e,Object.assign({stringConfirm:s,stringLineBreak:()=>{const e=N(f,"\n");o(e)}},u))},styles:y("input",c)}):t(B,Object.assign({nodeData:c,pathString:b,styles:y("string",c)},m))},G=({value:e,setValue:n,isEditing:r,path:o,setIsEditing:i,handleEdit:a,nodeData:l,handleKeyboard:s,keyboardCommon:c})=>{const{getStyles:d}=R();return r?t("input",{className:"jer-input-number",type:"text",name:j(o),value:e,onChange:e=>n(e.target.value.replace(/[^0-9.-]/g,"")),autoFocus:!0,onFocus:e=>setTimeout((()=>e.target.select()),10),onKeyDown:t=>s(t,Object.assign({numberConfirm:a,numberUp:()=>n(Number(e)+1),numberDown:()=>n(Number(e)-1)},c)),style:Object.assign({width:String(e).length/1.5+2+"em"},d("input",l))}):t("span",{onDoubleClick:()=>i(!0),className:"jer-value-number",style:d("number",l),children:e})},Y=({value:e,setValue:n,isEditing:r,path:o,setIsEditing:i,handleEdit:a,nodeData:l,handleKeyboard:s,keyboardCommon:c})=>{const{getStyles:d}=R();return r?t("input",{className:"jer-input-boolean",type:"checkbox",name:j(o),checked:e,onChange:()=>n(!e),onKeyDown:t=>{" "===t.key&&t.preventDefault(),s(t,Object.assign({booleanConfirm:a,booleanToggle:()=>n(!e)},c))},autoFocus:!0}):t("span",{onDoubleClick:()=>i(!0),className:"jer-value-boolean",style:d("boolean",l),children:String(e)})},H=({value:e,isEditing:n,setIsEditing:r,handleEdit:o,nodeData:i,handleKeyboard:s,keyboardCommon:c})=>{const{getStyles:d}=R(),u=a();l((()=>{if(n)return u.current=window.setTimeout((()=>window.addEventListener("keydown",p)),100),()=>window.removeEventListener("keydown",p);window.clearTimeout(u.current)}),[n]);const p=e=>s(e,Object.assign({confirm:o},c));return t("div",{onDoubleClick:()=>r(!0),className:"jer-value-null",style:d("null",i),children:String(e)})},U=({value:e})=>{let n="Error!";switch(typeof e){case"string":e===I&&(n="Function");break;case"undefined":n="Undefined";break;case"symbol":n="Symbol"}return t("span",{className:"jer-value-invalid",children:n})},$=({size:n,style:r,className:o})=>e("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:n,height:n,className:o,style:r,children:[t("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4z"}),t("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"})]}),J=({size:n,style:r,className:o})=>e("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:n,height:n,className:o,style:r,transform:"translate(0, 0.5)",children:[t("path",{d:"M7 17.013l4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z"}),t("path",{d:"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z"})]}),Z=({size:e,style:n,className:r})=>t("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:r,style:n,children:t("path",{d:"M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12m2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12M15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z"})}),X=({size:n,style:r,className:o})=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:n,height:n,className:o,style:r,children:[t("path",{d:"M9 2 H15 A1 1 0 0 1 16 3 V5 A1 1 0 0 1 15 6 H9 A1 1 0 0 1 8 5 V3 A1 1 0 0 1 9 2 z"}),t("path",{d:"M8 4H6a2 2 0 00-2 2v14a2 2 0 002 2h12a2 2 0 002-2v-2M16 4h2a2 2 0 012 2v4M21 14H11"}),t("path",{d:"M15 10l-4 4 4 4"})]}),Q=({size:n,style:r,className:o})=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:n,height:n,className:o,style:r,children:[t("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),t("path",{d:"M22 4L12 14.01l-3-3"})]}),q=({size:e,style:n,className:r})=>t("svg",{baseProfile:"tiny",viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:r,style:n,children:t("path",{d:"M12 4c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm-5 8c0-.832.224-1.604.584-2.295l6.711 6.711A4.943 4.943 0 0112 17c-2.757 0-5-2.243-5-5zm9.416 2.295L9.705 7.584A4.943 4.943 0 0112 7c2.757 0 5 2.243 5 5 0 .832-.224 1.604-.584 2.295z"})}),ee=({size:e,style:n,className:r})=>t("svg",{viewBox:"0 0 512 512",fill:"currentColor",width:e,height:e,className:r,style:n,children:t("path",{d:"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"})}),te=({name:e,nodeData:r,rotate:o})=>{var i,a,l,s,c,d,u;const{getStyles:p,icons:g}=R(),h={size:"1.4em",className:"jer-icon"};switch(e){case"add":return null!==(i=null==g?void 0:g.add)&&void 0!==i?i:t($,Object.assign({},h,{style:p("iconAdd",r)}));case"edit":return null!==(a=null==g?void 0:g.edit)&&void 0!==a?a:t(J,Object.assign({},h,{style:p("iconEdit",r)}));case"delete":return null!==(l=null==g?void 0:g.delete)&&void 0!==l?l:t(Z,Object.assign({},h,{style:p("iconDelete",r),size:"1.45em"}));case"copy":return null!==(s=null==g?void 0:g.copy)&&void 0!==s?s:t(X,Object.assign({},h,{style:p("iconCopy",r),size:"1.2em"}));case"ok":return null!==(c=null==g?void 0:g.ok)&&void 0!==c?c:t(Q,Object.assign({},h,{style:Object.assign({fontSize:"90%"},p("iconOk",r))}));case"cancel":return null!==(d=null==g?void 0:g.cancel)&&void 0!==d?d:t(q,Object.assign({},h,{style:Object.assign({fontSize:"130%"},p("iconCancel",r))}));case"chevron":return null!==(u=null==g?void 0:g.chevron)&&void 0!==u?u:t(ee,{size:"1em",style:p("iconCollection",r)});default:return t(n,{})}},ne=({startEdit:r,handleDelete:o,handleAdd:a,enableClipboard:l,type:s,customButtons:c,nodeData:d,translate:p,keyboardControls:g,handleKeyboard:h,editConfirmRef:m,getNewKeyOptions:y})=>{const{getStyles:f}=R(),b=p("KEY_NEW",d),[v,j]=i(b),[w,D]=i(!1),{key:C,path:k,value:O}=d,S=Array.isArray(w),N=e=>{var t;if(!e)return void D(!1);const n=Object.keys(u(d.fullData,k)),r=y?null===(t=y(d))||void 0===t?void 0:t.filter((e=>!n.includes(e))):null;r&&j(""),D(null==r||r)};return e("div",{className:"jer-edit-buttons",style:{opacity:w?1:void 0},onClick:e=>e.stopPropagation(),children:[l&&t("div",{onClick:e=>{var t;e.stopPropagation();let n,r,o="value",i="",a=null;if(l){const c=E(e);if(c&&g.clipboardModifier.includes(c)?(n=oe(k),i=n,o="path"):(n=O,i=s?JSON.stringify(O,null,2):String(n)),!navigator.clipboard)return void("function"==typeof l&&l({success:!1,value:n,stringValue:i,path:k,key:C,type:o,errorMessage:"Can't access clipboard API"}));null===(t=navigator.clipboard)||void 0===t||t.writeText(i).then((()=>r=!0)).catch((e=>{r=!1,a=e.message})).finally((()=>{"function"==typeof l&&l({success:r,errorMessage:a,value:n,stringValue:i,path:k,key:C,type:o})}))}},className:"jer-copy-pulse",children:t(te,{name:"copy",nodeData:d})}),r&&t("div",{onClick:r,children:t(te,{name:"edit",nodeData:d})}),o&&t("div",{onClick:o,children:t(te,{name:"delete",nodeData:d})}),a&&t("div",{onClick:()=>{"object"===s?N(!0):a("")},children:t(te,{name:"add",nodeData:d})}),null==c?void 0:c.map((({Element:e,onClick:n},r)=>t("div",{onClick:e=>n&&n(d,e),children:t(e,{nodeData:d})},r))),w&&a&&"object"===s&&e(n,{children:[S?e("div",{className:"jer-select jer-select-keys",children:[e("select",{name:"new-key-select",className:"jer-select-inner",onChange:e=>{a(e.target.value),N(!1)},defaultValue:"",autoFocus:!0,onKeyDown:e=>{h(e,{cancel:()=>N(!1)})},children:[t("option",{value:"",disabled:!0,children:w.length>0?p("KEY_SELECT",d):p("NO_KEY_OPTIONS",d)}),w.map((e=>t("option",{value:e,children:e},e)))]}),t("span",{className:"focus"})]}):t("input",{className:"jer-input-new-key",type:"text",name:"new-object-key",value:v,onChange:e=>j(e.target.value),autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:e=>{h(e,{stringConfirm:()=>{a&&(N(!1),a(v),j(b))},cancel:()=>{N(!1),j(b)}})},style:f("input",d)}),t(re,{onOk:()=>{S&&!v||(N(!1),a(v))},onCancel:()=>{N(!1)},nodeData:d,editConfirmRef:m,hideOk:S})]})]})},re=({onOk:n,onCancel:r,nodeData:o,editConfirmRef:i,hideOk:a=!1})=>e("div",{className:"jer-confirm-buttons",children:[!a&&t("div",{onClick:n,ref:i,children:t(te,{name:"ok",nodeData:o})}),t("div",{onClick:r,children:t(te,{name:"cancel",nodeData:o})})]}),oe=e=>e.reduce(((e,t)=>"number"==typeof t?`${e}[${t}]`:""===e?t:`${e}.${t}`),""),ie=["string","number","boolean","null","object","array"],ae=(e=[],t)=>{const n=e.filter((({condition:e})=>e(t)));if(0===n.length)return{};const r=n[0],{element:o,wrapperElement:i,customNodeProps:a,wrapperProps:l,hideKey:s=!1,showEditTools:c=!0,showOnEdit:d=!1,showOnView:u=!0,showCollectionWrapper:g=!0}=r,h=p(r,["element","wrapperElement","customNodeProps","wrapperProps","hideKey","showEditTools","showOnEdit","showOnView","showCollectionWrapper"]);return Object.assign({CustomNode:o,CustomWrapper:i,customNodeProps:a,wrapperProps:l,hideKey:s,showEditTools:c,showOnEdit:d,showOnView:u,showCollectionWrapper:g},h)},le=({props:e,collapsed:t})=>{const{data:n,nodeData:r,parentData:o,onEdit:a,onError:l,showErrorMessages:d,restrictEditFilter:u,restrictDeleteFilter:p,restrictAddFilter:g,restrictDragFilter:h,translate:m,errorMessageTimeout:y}=e,{currentlyEditingElement:f,setCurrentlyEditingElement:b}=M(),[v,E]=i(null),w=Object.assign(Object.assign({},r),{collapsed:t}),{path:D,key:C,size:k}=w,O=j(D),S=s((()=>!u(w)),[w]),N=s((()=>!p(w)),[w]),x=s((()=>!g(w)),[w]),A=s((()=>!h(w)&&N&&null===f),[w]),T=e=>{d&&(E(e),setTimeout((()=>E(null)),y)),console.warn("Error",e)},R=c(((e,t)=>{T(e.message),l&&l({currentData:w.fullData,errorValue:t,currentValue:n,name:C,path:D,error:e})}),[l,d]),K=f===O,P=f===`key_${O}`,V="number"==typeof D.slice(-1)[0];return{pathString:O,nodeData:w,path:D,name:C,size:k,canEdit:S,canDelete:N,canAdd:x,canDrag:A,error:v,showError:T,onError:R,setError:E,handleEditKey:e=>{if(b(null),C===e)return;if(!o)return;const t=D.slice(0,-1);if(Object.keys(o).includes(e))return void R({code:"KEY_EXISTS",message:m("ERROR_KEY_EXISTS",w)},e);const n=Object.fromEntries(Object.entries(o).map((([t,n])=>t===C?[e,n]:[t,n])));a(n,t).then((t=>{t&&R({code:"UPDATE_ERROR",message:t},e)}))},derivedValues:{isEditing:K,isEditingKey:P,isArray:V,canEditKey:null!==o&&S&&x&&N&&!V}}},se=({canDrag:e,canDragOnto:n,path:r,nodeData:o,onMove:a,onError:l,translate:c})=>{const{getStyles:d}=R(),{dragSource:u,setDragSource:p}=M(),[g,h]=i(!1),m=j(r),y=s((()=>e?{onDragStart:e=>{e.stopPropagation(),p({path:r,pathString:m})},onDragEnd:e=>{e.stopPropagation(),p({path:null,pathString:null})}}:{}),[e]),f=s((()=>e=>n?{onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDrop:t=>{t.stopPropagation(),v(e),p({path:null,pathString:null}),h(!1)},onDragEnter:t=>{var n;t.stopPropagation(),m.startsWith(null!==(n=u.pathString)&&void 0!==n?n:"")||h(e)},onDragExit:e=>{e.stopPropagation(),h(!1)}}:{}),[u,n]),b=s((()=>n&&null!==u.pathString?t("div",Object.assign({className:"jer-drop-target-bottom",style:{height:"50%",position:"absolute",width:"100%",top:"50%",zIndex:r.length}},f("below"))):null),[u,n]),v=e=>{var t,n;const i=null===(t=u.path)||void 0===t?void 0:t.slice(-1)[0],s=null===(n=u.path)||void 0===n?void 0:n.slice(0,-1).join("."),d=r.slice(0,-1).join(""),{parentData:p}=o;"string"==typeof i&&p&&!Array.isArray(p)&&Object.keys(p).includes(i)&&i in p&&s!==d?l({code:"KEY_EXISTS",message:c("ERROR_KEY_EXISTS",o)},i):a(u.path,r,e).then((e=>{e&&l({code:"UPDATE_ERROR",message:e},o.value)}))};return{dragSourceProps:y,getDropTargetProps:f,BottomDropTarget:b,DropTargetPadding:({position:e,nodeData:n})=>g===e?t("div",{className:"jer-drag-n-drop-padding",style:d("dropZone",n)}):null,handleDrop:v}},ce=(e,t,n)=>{var r,o,i;const a=parseInt(null!==(r=getComputedStyle(n.current).getPropertyValue("line-height"))&&void 0!==r?r:"16px"),l=(null!==(i=null===(o=t.current)||void 0===o?void 0:o.offsetWidth)&&void 0!==i?i:0)/(.5*a),s=JSON.stringify(e,null,2).replace(/\\n/g,"\n").split("\n").map((e=>Math.ceil(e.length/l))).reduce(((e,t)=>e+t),0)*a;return Math.min(s+30,window.innerHeight-50)},de=({isEditingKey:n,canEditKey:r,pathString:o,path:i,name:a,handleKeyboard:l,handleEditKey:s,handleCancel:c,handleClick:d,keyValueArray:u,styles:p,getNextOrPrevious:g})=>{const{setCurrentlyEditingElement:h}=M();return n?t("input",{className:"jer-input-text jer-key-edit",type:"text",name:o,defaultValue:a,autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:e=>l(e,{stringConfirm:()=>s(e.target.value),cancel:c,tabForward:()=>{if(s(e.target.value),u){const e=null==u?void 0:u[0][0];h(e?[...i,e]:g("next"))}else h(i)},tabBack:()=>{s(e.target.value),h(g("prev"))}}),style:{width:String(a).length/1.5+.5+"em"}}):e("span",{className:"jer-key-text",style:Object.assign(Object.assign({},p),{minWidth:`${Math.min(String(a).length+1,5)}ch`,flexShrink:a.length>10?1:0}),onDoubleClick:()=>r&&h(i,"key"),onClick:d,children:[""===a?t("span",{className:i.length>0?"jer-empty-string":void 0}):`${a}`,t("span",{className:"jer-key-colon",children:":"})]})},ue=n=>{const{data:r,parentData:o,onEdit:a,onDelete:d,onChange:u,onMove:p,enableClipboard:g,canDragOnto:h,restrictTypeSelection:m,searchFilter:f,searchText:b,showLabel:v,stringTruncate:j,showStringQuotes:E,indent:w,translate:D,customNodeDefinitions:C,handleKeyboard:O,keyboardControls:S,sort:N,editConfirmRef:x}=n,{getStyles:A}=R(),{setCurrentlyEditingElement:T,setCollapseState:K,previouslyEditedElement:P,setPreviouslyEditedElement:V,tabDirection:z,setTabDirection:_,previousValue:F,setPreviousValue:L}=M(),[B,W]=i("function"==typeof r?I:r),{pathString:G,nodeData:Y,path:H,name:U,canEdit:$,canDelete:J,canDrag:Z,error:X,onError:Q,handleEditKey:q,derivedValues:ee}=le({props:n}),{dragSourceProps:te,getDropTargetProps:oe,BottomDropTarget:ce,DropTargetPadding:ue}=se({canDrag:Z,canDragOnto:h,path:H,nodeData:Y,onMove:p,onError:Q,translate:D}),me=ae(C,Y),[ye,fe]=i(pe(r,me)),be=c((e=>{if(!u)return void W(e);const t=u({currentData:Y.fullData,newValue:e,currentValue:B,name:U,path:H});W(t)}),[u]);l((()=>{W("function"==typeof r?I:r),fe(pe(r,me))}),[r,X]);const{CustomNode:ve,customNodeProps:je,hideKey:Ee,showEditTools:we=!0,showOnEdit:De,showOnView:Ce,passOriginalNode:ke}=me,Oe=[...ie,...C.filter((({showInTypesSelector:e=!1,name:t})=>e&&!!t)).map((({name:e})=>e))],Se=s((()=>{if("boolean"==typeof m)return m?[]:Oe;if(Array.isArray(m))return m;const e=m(Y);return"boolean"==typeof e?e?[]:Oe:e}),[Y,m]),[Ne,xe]=i(((e,t)=>{var n;if("string"!=typeof e)return null;const r=t.filter((t=>t instanceof Object&&t.enum&&t.values.includes(e)&&t.matchPriority));return r.sort(((e,t)=>{var n,r;return(null!==(n=t.matchPriority)&&void 0!==n?n:0)-(null!==(r=e.matchPriority)&&void 0!==r?r:0)})),null!==(n=r[0])&&void 0!==n?n:null})(B,Se)),{isEditing:Ae}=ee,Te=y("value",Y,f,b);if(Ae&&(!Te||!$)){const e=k(Y.fullData,H,z,N);T(e||P)}if(!Te)return null;const Re=()=>{let e;switch(T(null),L(null),ye){case"object":e={[D("DEFAULT_NEW_KEY",Y)]:B};break;case"array":e=null!=B?B:[];break;case"number":{const t=Number(B);e=isNaN(t)?0:t;break}default:e=B}a(e,H).then((t=>{t&&Q({code:"UPDATE_ERROR",message:t},e)}))},Ke=()=>{T(null),null===F?(W(r),L(null)):a(F,H)},{isEditingKey:Pe,canEditKey:Ve}=ee,ze=!Ae&&X,_e=Ae&&Se.length>1,Fe="invalid"!==ye&&!X&&we,Me=v&&!Ee,Le=ve&&(Ae&&De||!Ae&&Ce),Ie={value:B,parentData:o,setValue:be,isEditing:Ae,canEdit:$,setIsEditing:$?()=>T(H):()=>{},handleEdit:Re,handleCancel:Ke,path:H,stringTruncate:j,showStringQuotes:E,nodeData:Y,enumType:Ne,translate:D,handleKeyboard:O,keyboardCommon:{cancel:Ke,tabForward:()=>{_("next"),V(G);const e=k(Y.fullData,H,"next",N);e&&(Re(),T(e))},tabBack:()=>{_("prev"),V(G);const e=k(Y.fullData,H,"prev",N);e&&(Re(),T(e))}}},Be={canEditKey:Ve,isEditingKey:Pe,pathString:G,path:H,name:U,handleKeyboard:O,handleEditKey:q,handleCancel:Ke,styles:A("property",Y),getNextOrPrevious:e=>k(Y.fullData,H,e,N)},We=Le?t(ve,Object.assign({},n,{value:B,customNodeProps:je,setValue:be,handleEdit:Re,handleCancel:Ke,handleKeyPress:e=>O(e,{stringConfirm:Re,cancel:Ke}),isEditing:Ae,setIsEditing:()=>T(H),getStyles:A,originalNode:ke?ge(r,Ie):void 0,originalNodeKey:ke?t(de,Object.assign({},Be)):void 0})):ge(r,Ie);return e("div",Object.assign({className:"jer-component jer-value-component",style:{marginLeft:w/2+"em",position:"relative"},draggable:Z},te,oe("above"),{children:[ce,t(ue,{position:"above",nodeData:Y}),e("div",{className:"jer-value-main-row",style:{flexWrap:U.length>10?"wrap":"nowrap"},children:[Me&&t(de,Object.assign({},Be)),e("div",{className:"jer-value-and-buttons",children:[t("div",{className:"jer-input-component",children:We}),Ae?t(re,{onOk:Re,onCancel:Ke,nodeData:Y,editConfirmRef:x}):Fe&&t(ne,{startEdit:$?()=>{L(B),T(H,Ke)}:void 0,handleDelete:J?()=>{d(B,H).then((e=>{e&&Q({code:"DELETE_ERROR",message:e},B)}))}:void 0,enableClipboard:g,translate:D,customButtons:n.customButtons,nodeData:Y,handleKeyboard:O,keyboardControls:S,editConfirmRef:x}),_e&&e("div",{className:"jer-select jer-select-types",children:[t("select",{name:`${U}-type-select`,className:"jer-select-inner",onChange:e=>(e=>{const t=C.find((t=>t.name===e));if(t)return a(t.defaultValue,H),fe(e),xe(null),T(null),void K({path:H,collapsed:!1,includeChildren:!1});const n=Se.find((t=>t instanceof Object&&t.enum===e));if(n)return"string"==typeof B&&n.values.includes(B)||a(n.values[0],H).then((e=>{e&&(Q({code:"UPDATE_ERROR",message:e},r),T(null))})),void xe(n);const r=he(B,e,D("DEFAULT_NEW_KEY",Y),(null==me?void 0:me.CustomNode)?D("DEFAULT_STRING",Y):void 0);a(r,H).then((e=>{e?(Q({code:"UPDATE_ERROR",message:e},r),T(null)):xe(null)}))})(e.target.value),value:Ne?Ne.enum:ye,children:Se.map((e=>e instanceof Object&&"enum"in e?t("option",{value:e.enum,children:e.enum},e.enum):t("option",{value:e,children:e},e)))}),t("span",{className:"focus"})]}),ze&&t("span",{className:"jer-error-slug",style:A("error",Y),children:X})]})]}),t(ue,{position:"below",nodeData:Y})]}))},pe=(e,t)=>(null==t?void 0:t.CustomNode)&&(null==t?void 0:t.name)&&t.showInTypesSelector?t.name:"string"==typeof e?"string":"number"==typeof e?"number":"boolean"==typeof e?"boolean":null===e?"null":"invalid",ge=(e,n)=>{const r=pe(e),{value:o}=n;switch(r){case"string":return t(W,Object.assign({},n,{value:o}));case"number":return t(G,Object.assign({},n,{value:o}));case"boolean":return t(Y,Object.assign({},n,{value:o}));case"null":return t(H,Object.assign({},n));default:return t(U,Object.assign({},n))}},he=(e,t,n,r)=>{switch(t){case"string":return null!=r?r:String(e);case"number":{const t=Number(e);return isNaN(t)?0:t}case"boolean":return!!e;case"null":return null;case"object":return{[n]:e};case"array":return[e];default:return String(e)}},me=r=>{const{getStyles:o}=R(),{collapseState:d,setCollapseState:u,getMatchingCollapseState:p,currentlyEditingElement:f,setCurrentlyEditingElement:b,areChildrenBeingEdited:v,previousValue:j,setPreviousValue:w}=M(),{mainContainerRef:D,data:C,nodeData:O,parentData:S,showCollectionCount:x,onEdit:A,onAdd:T,onDelete:K,canDragOnto:P,collapseFilter:V,collapseAnimationTime:z,onMove:_,enableClipboard:F,searchFilter:L,searchText:I,indent:B,sort:W,showArrayIndices:G,defaultValue:Y,newKeyOptions:H,translate:U,customNodeDefinitions:$,jsonParse:J,jsonStringify:Z,TextEditor:X,keyboardControls:Q,handleKeyboard:q,insertAtTop:ee,onCollapse:oe,editConfirmRef:ie,collapseClickZones:pe}=r,[ge,he]=i(Z(C)),ye=V(O),{contentRef:fe,isAnimating:be,maxHeight:ve,collapsed:je,animateCollapse:Ee,cssTransitionValue:we}=((e,t,n,r)=>{const[o,l]=i(n?0:void 0),[s,c]=i(n),d=a(!1),u=a(null),p=a(0),g=a(),h=t/1e3+"s";return{contentRef:u,isAnimating:d.current,animateCollapse:n=>{var o,i;if(s!==n){switch(window.clearTimeout(g.current),d.current=!0,n){case!0:{const e=null!==(i=null===(o=u.current)||void 0===o?void 0:o.offsetHeight)&&void 0!==i?i:0;p.current=e,l(e),setTimeout((()=>{l(0)}),5);break}case!1:l(p.current||ce(e,u,r))}c(!s),g.current=window.setTimeout((()=>{d.current=!1,n||l(void 0)}),t)}},maxHeight:o,collapsed:s,cssTransitionValue:h}})(C,z,ye,D),{pathString:De,nodeData:Ce,path:ke,name:Oe,size:Se,canEdit:Ne,canDelete:xe,canAdd:Ae,canDrag:Te,error:Re,setError:Ke,onError:Pe,handleEditKey:Ve,derivedValues:ze}=le({props:r,collapsed:je}),{dragSourceProps:_e,getDropTargetProps:Fe,BottomDropTarget:Me,DropTargetPadding:Le}=se({canDrag:Te,canDragOnto:P,path:ke,nodeData:Ce,onMove:_,onError:Pe,translate:U}),Ie=a(!ye),{isEditing:Be,isEditingKey:We,isArray:Ge,canEditKey:Ye}=ze;l((()=>{he(Z(C))}),[C]),l((()=>{const e=V(Ce)&&!Be;Ie.current=!e,Ee(e)}),[V]),l((()=>{if(null!==d){const e=p(ke);e&&(Ie.current=!0,Ee(e.collapsed))}}),[d]);const He=a(null),Ue=c(((e,t)=>{if("function"!=typeof Y)return Y;const n=Y(e,t);return void 0!==n?n:null}),[Y]),$e=c((e=>H?"function"!=typeof H?H:H(e):null),[H]),{CustomNode:Je,customNodeProps:Ze,CustomWrapper:Xe,wrapperProps:Qe={},hideKey:qe,showEditTools:et=!0,showOnEdit:tt,showOnView:nt,showCollectionWrapper:rt=!0}=s((()=>ae($,Ce)),[C]),ot=v(De);ot&&je&&Ee(!1);if(!(y("collection",Ce,L,I)||0===Ce.level)&&!ot)return null;const it=Array.isArray(C)?"array":"object",at="array"===it?{open:"[",close:"]"}:{open:"{",close:"}"},lt=e=>{if("Tab"!==e.key||e.getModifierState("Shift"))q(e,{objectConfirm:ct,cancel:ut});else{e.preventDefault();const t=N(He,"\t");he(t)}},st=e=>{e.stopPropagation();const t=E(e);if(t&&Q.collapseModifier.includes(t))return Ie.current=!0,void u({collapsed:!je,path:ke,includeChildren:!0});f&&f.includes(De)||(Ie.current=!0,u(null),oe&&oe({path:ke,collapsed:!je,includeChildren:!1}),Ee(!je))},ct=()=>{try{const e=J(ge);if(b(null),w(null),Ke(null),JSON.stringify(e)===JSON.stringify(C))return;A(e,ke).then((t=>{t&&Pe({code:"UPDATE_ERROR",message:t},e)}))}catch(e){Pe({code:"INVALID_JSON",message:U("ERROR_INVALID_JSON",Ce)},ge)}},dt=ke.length>0?()=>{K(C,ke).then((e=>{e&&Pe({code:"DELETE_ERROR",message:e},C)}))}:void 0,ut=()=>{b(null),null===j?(Ke(null),he(Z(C)),w(null)):A(j,ke)},pt="when-closed"===x?je:x,gt=!Be&&et,ht=(G||!Ge)&&!qe&&void 0!==Oe,mt=Je&&(Be&&tt||!Be&&nt),yt=Object.entries(C).map((([e,t])=>["array"===it?Number(e):e,t]));"object"===it&&W(yt,(e=>e));const ft=Ie.current?Be?e("div",{className:"jer-collection-text-edit",children:[X?t(X,{value:ge,onChange:he,onKeyDown:e=>q(e,{objectConfirm:ct,cancel:ut})}):t(h,{textAreaRef:He,className:"jer-collection-text-area",name:De,value:ge,setValue:he,isEditing:Be,handleKeyPress:lt,styles:o("input",Ce)}),t("div",{className:"jer-collection-input-button-row",children:t(re,{onOk:ct,onCancel:ut,nodeData:Ce,editConfirmRef:ie})})]}):yt.map((([e,n],i)=>{const a={key:e,value:n,path:[...ke,e],level:ke.length+1,index:i,size:m(n)?Object.keys(n).length:1,parentData:C,fullData:Ce.fullData};return t("div",{className:"jer-collection-element",style:o("collectionElement",a),children:m(n)?t(me,Object.assign({},r,{data:n,parentData:C,nodeData:a,showCollectionCount:x,canDragOnto:Ne}),e):t(ue,Object.assign({},r,{data:n,parentData:C,nodeData:a,canDragOnto:Ne,showLabel:"object"===it||G}),e)},e)})):null,bt=!!rt&&(je&&!ot);bt||(Ie.current=!0);const vt=Object.assign(Object.assign({},r),{data:C,value:C,parentData:S,nodeData:Ce,setValue:e=>g(void 0,void 0,void 0,(function*(){return yield A(e,ke)})),handleEdit:ct,handleCancel:ut,handleKeyPress:lt,isEditing:Be,setIsEditing:()=>b(ke),getStyles:o,canDragOnto:Ne}),jt=mt?t(Je,Object.assign({customNodeProps:Ze},vt,{children:ft})):ft,Et=gt&&t(ne,{startEdit:Ne?()=>{Ie.current=!0,w(null),b(ke)}:void 0,handleAdd:Ae?e=>{Ee(!1);const t=Ue(Ce,e);if("array"===it){const e=ee.array?0:C.length,n=ee.array?{insert:!0}:{};T(t,[...ke,e],n).then((e=>{e&&Pe({code:"ADD_ERROR",message:e},t)}))}else if(e in C)Pe({code:"KEY_EXISTS",message:U("ERROR_KEY_EXISTS",Ce)},e);else{const n=ee.object?{insertBefore:0}:{};T(t,[...ke,e],n).then((e=>{e&&Pe({code:"ADD_ERROR",message:e},t)}))}}:void 0,handleDelete:xe?dt:void 0,enableClipboard:F,type:it,nodeData:Ce,translate:U,customButtons:r.customButtons,keyboardControls:Q,handleKeyboard:q,getNewKeyOptions:$e,editConfirmRef:ie}),wt={canEditKey:Ye,isEditingKey:We,pathString:De,path:ke,name:Oe,handleKeyboard:q,handleEditKey:Ve,handleCancel:ut,keyValueArray:yt,styles:o("property",Ce),getNextOrPrevious:e=>k(Ce.fullData,ke,e,W),handleClick:pe.includes("property")?st:e=>e.stopPropagation()},Dt=e("div",Object.assign({className:"jer-component jer-collection-component",style:Object.assign(Object.assign({marginLeft:(0===ke.length?0:B/2)+"em"},o("collection",Ce)),{position:"relative"}),draggable:Te},_e,Fe("above"),{children:[t("div",{className:"jer-clickzone",style:{width:B/2+1+"em",zIndex:10+2*Ce.level},onClick:pe.includes("left")?st:void 0}),!Be&&Me,t(Le,{position:"above",nodeData:Ce}),rt?e("div",{className:"jer-collection-header-row",style:{position:"relative"},onClick:pe.includes("header")?st:void 0,children:[e("div",{className:"jer-collection-name",children:[t("div",{className:"jer-collapse-icon jer-accordion-icon"+(je?" jer-rotate-90":""),style:{zIndex:11+2*Ce.level,transition:we},onClick:st,children:t(te,{name:"chevron",rotate:je,nodeData:Ce})}),ht&&t(de,Object.assign({},wt)),!Be&&t("span",{className:"jer-brackets jer-bracket-open",style:o("bracket",Ce),children:at.open})]}),!Be&&pt&&t("div",{className:"jer-collection-item-count"+(pt?" jer-visible":" jer-hidden"),style:Object.assign(Object.assign({},o("itemCount",Ce)),{transition:we}),children:1===Se?U("ITEM_SINGLE",Object.assign(Object.assign({},Ce),{size:1}),1):U("ITEMS_MULTIPLE",Ce,Se)}),t("div",{className:"jer-brackets"+(bt?" jer-visible":" jer-hidden"),style:Object.assign(Object.assign({},o("bracket",Ce)),{transition:we}),children:at.close}),Et]}):qe?t(n,{}):e("div",{className:"jer-collection-header-row",style:{position:"relative"},children:[t(de,Object.assign({},wt)),Et]}),e("div",{className:"jer-collection-inner",style:Object.assign(Object.assign({overflowY:bt||be?"clip":"visible",maxHeight:ot?void 0:ve},o("collectionInner",Ce)),{transition:we}),ref:fe,children:[jt,t("div",{className:Be?"jer-collection-error-row":"jer-collection-error-row-edit",children:Re&&t("span",{className:"jer-error-slug",style:o("error",Ce),children:Re})}),!Be&&rt&&t("div",{className:"jer-brackets jer-bracket-outside",style:Object.assign(Object.assign({},o("bracket",Ce)),{marginLeft:(B<3?-1:B<6?-.5:0)+"em"}),children:at.close})]}),t(Le,{position:"below",nodeData:Ce})]}));return Xe?t(Xe,Object.assign({customNodeProps:Qe},vt,{children:Dt})):Dt},ye={ITEM_SINGLE:"{{count}} item",ITEMS_MULTIPLE:"{{count}} items",KEY_NEW:"Enter new key",KEY_SELECT:"Select key",NO_KEY_OPTIONS:"No key options",ERROR_KEY_EXISTS:"Key already exists",ERROR_INVALID_JSON:"Invalid JSON",ERROR_UPDATE:"Update unsuccessful",ERROR_DELETE:"Delete unsuccessful",ERROR_ADD:"Adding node unsuccessful",DEFAULT_STRING:"New data!",DEFAULT_NEW_KEY:"key",SHOW_LESS:"(Show less)"},fe=(e,t)=>(n,r,o)=>((e,t,n,r,o)=>{if(t[r]){const e=t[r](n);if(null!==e)return e}const i=r in e?e[r]:ye[r];return void 0===o?i:null==i?void 0:i.replace("{{count}}",String(o))})(e,t,r,n,o);var be=[],ve=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",o=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(o){var a=be.indexOf(i);-1===a&&(a=be.push(i)-1,ve[a]={}),n=ve[a]&&ve[a][r]?ve[a][r]:ve[a][r]=l()}else n=l();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function l(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),o=0;o<n.length;o++)e.setAttribute(n[o],t.attributes[n[o]]);var a="prepend"===r?"afterbegin":"beforeend";return i.insertAdjacentElement(a,e),e}}(':root{--jer-select-border:#b6b6b6;--jer-select-focus:#777;--jer-select-arrow:#777;--jer-form-border:1px solid #ededf0;--jer-form-border-focus:1px solid #e2e2e2;--jer-highlight-color:#b3d8ff}.jer-visible{opacity:1}.jer-hidden{opacity:0}.jer-select select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#000;cursor:inherit;font-family:inherit;font-size:.8em;line-height:inherit;margin:0;outline:none;padding:0 1em 0 0;z-index:1}select::-ms-expand{display:none}.jer-select{align-items:center;background-color:#fff;background-image:linear-gradient(0deg,#f9f9f9,#fff 33%);border:1px solid var(--jer-select-border);border-radius:.25em;cursor:pointer;display:grid;grid-template-areas:"select";line-height:1.1;max-width:15ch;min-width:12ch;padding:.25em .5em;position:relative}.jer-select select,.jer-select:after{grid-area:select}.jer-select:not(.jer-select--multiple):after{background-color:var(--jer-select-arrow);clip-path:polygon(100% 0,0 0,50% 100%);content:"";height:.5em;justify-self:end;width:.8em}select:focus+.focus{border:1px solid var(--jer-select-focus);border-radius:inherit;bottom:-1px;left:-1px;position:absolute;right:-1px;top:-1px}.jer-select-inner{text-overflow:ellipsis;width:100%}.jer-editor-container{border-radius:.5em;font-size:16px;line-height:1;padding:1em 1em 1em 2em;position:relative;text-align:left}.jer-editor-container textarea{border:var(--jer-form-border);border-radius:.3em;color:var(--jer-input-color);outline:none}.jer-editor-container textarea:focus{border:var(--jer-form-border-focus)}.jer-editor-container input{border:var(--jer-form-border);border-radius:.3em;font-family:inherit;outline:none}.jer-editor-container input:focus{border:var(--jer-form-border-focus)}.jer-editor-container ::selection{background-color:var(--jer-highlight-color)}.jer-collection-header-row,.jer-value-main-row{align-items:center;display:flex;gap:.3em;min-height:1.7em}.jer-collection-header-row{display:flex;flex-wrap:wrap}.jer-collapse-icon{left:-1.2em;position:absolute;top:.35em}.jer-collection-inner{position:relative}.jer-collection-text-edit{align-items:flex-start;display:flex;flex-direction:column;gap:.3em;line-height:1.1em}.jer-collection-text-area{font-family:inherit;font-size:.85em;max-height:40em;overflow:hidden;padding:.2em .5em 0;resize:both}.jer-collection-input-button-row{display:flex;font-size:150%;justify-content:flex-end;margin-top:.4em;width:100%}.jer-collection-error-row{bottom:.5em;position:absolute}.jer-error-slug{margin-left:1em}.jer-value-component{position:relative}.jer-value-main-row{display:flex;gap:0}.jer-value-and-buttons{align-items:center;display:flex;justify-content:flex-start;padding-left:.5em}.jer-value-error-row{position:absolute}.jer-value-string{line-height:1.3em;overflow-wrap:anywhere;white-space:pre-wrap;word-break:break-word}.jer-string-expansion{cursor:pointer;filter:saturate(50%);opacity:.6}.jer-show-less{font-size:80%}.jer-hyperlink{text-decoration:underline}.jer-input-text{font-family:inherit;font-size:.9em;height:1.4em;line-height:1.2em;margin:0;min-width:6em;overflow:hidden;padding:.25em .5em .2em;resize:none}.jer-input-boolean{margin-left:.3em;margin-right:.3em;transform:scale(1.5)}.jer-key-text{line-height:1.1em;white-space:pre-wrap;word-break:break-word}.jer-key-edit{font-size:inherit;font-size:.9em;padding:0 .3em}.jer-value-invalid{font-style:italic;opacity:.5}.jer-input-number{font-size:90%;min-width:3em}.jer-confirm-buttons,.jer-edit-buttons{align-items:center;cursor:pointer;display:flex;height:1em}.jer-input-buttons{gap:.4em}.jer-edit-buttons{gap:.4em;margin-left:.5em;opacity:0}.jer-confirm-buttons{gap:.2em;margin-left:.4em}.jer-edit-buttons:hover{opacity:1;position:relative}.jer-collection-header-row:hover>.jer-edit-buttons,.jer-value-and-buttons:hover>.jer-edit-buttons,.jer-value-main-row:hover>.jer-edit-buttons{opacity:1}.jer-copy-pulse{position:relative;transition:.3s}.jer-copy-pulse:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-copy-pulse:after{border-radius:50%;box-shadow:0 0 15px 5px var(--jer-icon-copy-color);content:"";display:block;height:100%;left:0;opacity:0;position:absolute;top:0;transition:all .5s;width:100%}.jer-copy-pulse:active:after{border-radius:4em;box-shadow:0 0 0 0 var(--jer-icon-copy-color);left:0;opacity:1;position:absolute;top:0;transition:0s}.jer-copy-pulse:active{top:.07em}.jer-rotate-90{transform:rotate(-90deg)}.jer-icon:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-empty-string:after{content:"<empty string>";font-size:90%;font-style:italic}.jer-drag-n-drop-padding{border:1px dashed #e0e0e0;border-radius:.3em;height:.5em}.jer-clickzone{height:calc(100% - .8em);left:-1em;position:absolute;top:1.2em}',{});const je=({data:e,setData:n,rootName:r="root",onUpdate:o=(()=>{}),onEdit:d=o,onDelete:u=o,onAdd:p=o,onChange:h,onError:y,showErrorMessages:f=!0,enableClipboard:b=!0,indent:v=2,collapse:E=!1,collapseAnimationTime:D=300,showCollectionCount:k=!0,restrictEdit:O=!1,restrictDelete:S=!1,restrictAdd:N=!1,restrictTypeSelection:x=!1,restrictDrag:A=!0,viewOnly:T,searchFilter:K,searchText:P,searchDebounceTime:V=350,keySort:z=!1,showArrayIndices:_=!0,showStringQuotes:F=!0,defaultValue:L=null,newKeyOptions:I,minWidth:B=250,maxWidth:W="min(600px, 90vw)",rootFontSize:G,stringTruncate:Y=250,translations:H={},className:U,id:$,customText:J={},customNodeDefinitions:Z=[],customButtons:X=[],jsonParse:Q=JSON.parse,jsonStringify:q=(e=>JSON.stringify(e,null,2)),TextEditor:ee,errorMessageTimeout:te=2500,keyboardControls:ne={},externalTriggers:re,insertAtTop:oe=!1,onCollapse:ie,collapseClickZones:ae=["header","left"]})=>{const{getStyles:le}=R(),{setCurrentlyEditingElement:se}=M(),ce=c(De(E),[E]),de=c(fe(H,J),[H,J]),[pe,ge]=i(P),[he,ye]=(({setData:e,data:t})=>{const[n,r]=i(e?void 0:t),o=c((t=>{e?e(t):r(t)}),[e]);return l((()=>{e||r(t)}),[t]),[e?t:n,o]})({setData:n,data:e}),be=a(null);l((()=>{se(null);const e=setTimeout((()=>ge(P)),V);return()=>clearTimeout(e)}),[P,V]);const ve={key:r,path:[],level:0,index:0,value:he,size:"object"==typeof he&&null!==he?Object.keys(he).length:1,parentData:null,fullData:he},je=(e,t)=>g(void 0,void 0,void 0,(function*(){const n=yield e(t);if(!0===n||void 0===n)return void ye(t.newData);const r=ke(n)?n:["error",n],[o,i]=r;if("error"===o)return ye(t.currentData),!1===i?de("ERROR_UPDATE",ve):String(i);ye(i)})),Ee=s((()=>De(O,T)),[O,T]),Oe=s((()=>De(S,T)),[S,T]),Se=s((()=>De(N,T)),[N,T]),Ne=s((()=>De(A,T)),[A,T]),xe=s((()=>Ce(K)),[K]),Ae=s((()=>(e=>{const t=Object.assign({},C);for(const n of Object.keys(C)){const r=n;if(e[r]){const o=e[r],i=["clipboardModifier","collapseModifier"].includes(n)?Array.isArray(o)?o:[o]:"string"==typeof o?{key:o}:o;t[r]=i,["stringConfirm","numberConfirm","booleanConfirm"].forEach((n=>{!e[n]&&e.confirm&&(t[n]=t.confirm)}))}}return t})(ne)),[ne]),Te=c(((e,t)=>((e,t,n)=>{const r=Object.entries(t);for(const[t,o]of r)if(w(n,e[t],t)){n.preventDefault(),o();break}})(Ae,t,e)),[ne]),Re=a(null);((e,t)=>{const{setCurrentlyEditingElement:n,currentlyEditingElement:r,setCollapseState:o}=M();l((()=>{if(!e)return;const{collapse:i,edit:a}=e;i&&o(i);const l=!(null==a?void 0:a.path)||j(a.path)===r;switch(null==a?void 0:a.action){case"accept":l&&(t.current&&t.current.click(),n(null));break;case"cancel":l&&n(null);break;default:(null==a?void 0:a.path)&&n(a.path)}}),[e])})(re,Re);const Ke=c(((e,t)=>{!1!==z&&("function"!=typeof z?e.sort(((e,n)=>{const r=t(e)[0],o=t(n)[0];return r<o?-1:r>o?1:0})):e.sort(((e,n)=>z(t(e),t(n)))))}),[z]),Pe={mainContainerRef:be,name:r,nodeData:ve,onEdit:(e,t)=>g(void 0,void 0,void 0,(function*(){const{currentData:n,newData:r,currentValue:o,newValue:i}=we(he,t,e,"update");if(o!==i)return yield je(d,{currentData:n,newData:r,currentValue:o,newValue:i,name:t.slice(-1)[0],path:t})})),onDelete:(e,t)=>g(void 0,void 0,void 0,(function*(){const{currentData:n,newData:r,currentValue:o,newValue:i}=we(he,t,e,"delete");return yield je(u,{currentData:n,newData:r,currentValue:o,newValue:i,name:t.slice(-1)[0],path:t})})),onAdd:(e,t,n)=>g(void 0,void 0,void 0,(function*(){const{currentData:r,newData:o,currentValue:i,newValue:a}=we(he,t,e,"add",n);return yield je(p,{currentData:r,newData:o,currentValue:i,newValue:a,name:t.slice(-1)[0],path:t})})),onChange:h,onError:y,showErrorMessages:f,onMove:(e,t,n)=>g(void 0,void 0,void 0,(function*(){if(null===e)return;const{currentData:r,newData:o,currentValue:i}=we(he,e,"","delete"),a=e.slice(-1)[0],l=t.slice(0,-1),s=t.slice(-1)[0];let c="number"==typeof s?"above"===n?s:s+1:"number"==typeof a?`arr_${a}`:a;e.slice(0,-1).join(".")===t.slice(0,-1).join(".")&&"number"==typeof a&&"number"==typeof c&&a<c&&(c-=1);const u="number"==typeof c?{insert:!0}:"above"===n?{insertBefore:s}:{insertAfter:s},{newData:p,newValue:g}=we(o,[...l,c],i,"add",u);return yield je(d,{currentData:r,newData:p,currentValue:i,newValue:g,name:t.slice(-1)[0],path:t})})),showCollectionCount:k,collapseFilter:ce,collapseAnimationTime:D,restrictEditFilter:Ee,restrictDeleteFilter:Oe,restrictAddFilter:Se,restrictTypeSelection:x,restrictDragFilter:Ne,canDragOnto:!1,searchFilter:xe,searchText:pe,enableClipboard:b,keySort:z,sort:Ke,showArrayIndices:_,showStringQuotes:F,indent:v,defaultValue:L,newKeyOptions:I,stringTruncate:Y,translate:de,customNodeDefinitions:Z,customButtons:X,parentData:null,jsonParse:Q,jsonStringify:q,TextEditor:ee,errorMessageTimeout:te,handleKeyboard:Te,keyboardControls:Ae,insertAtTop:{object:!0===oe||"object"===oe,array:!0===oe||"array"===oe},onCollapse:ie,editConfirmRef:Re,collapseClickZones:ae},Ve=Object.assign(Object.assign({},le("container",ve)),{minWidth:B,maxWidth:W});return Ve.fontSize=null!=G?G:Ve.fontSize,t("div",{id:$,ref:be,className:`jer-editor-container ${null!=U?U:""}`,style:Ve,children:m(he)?t(me,Object.assign({data:he},Pe)):t(ue,Object.assign({data:he,showLabel:!0},Pe))})},Ee=e=>{var n;const[r,o]=i();return l((()=>{const e=document.documentElement;o(e)}),[]),r?t(T,{theme:null!==(n=e.theme)&&void 0!==n?n:x,icons:e.icons,docRoot:r,children:t(F,{onEditEvent:e.onEditEvent,onCollapse:e.onCollapse,children:t(je,Object.assign({},e))})}):null},we=(e,t,n,r,o={})=>{if(0===t.length)return{currentData:e,newData:n,currentValue:e,newValue:n};const i=Object.assign({remove:"delete"===r},o),a="add"!==r?u(e,t):void 0;return{currentData:e,newData:d(e,t,n,i),currentValue:a,newValue:"delete"!==r?n:void 0}},De=(e,t)=>t?()=>!0:"boolean"==typeof e?()=>e:"number"==typeof e?({level:t})=>t>=e:e,Ce=e=>{if(void 0!==e)return"value"===e?b:"key"===e?v:"all"===e?(e,t)=>b(e,t)||v(e,t):e},ke=e=>Array.isArray(e)&&2===e.length&&["error","value"].includes(e[0]),Oe=e=>{var n;const{value:r,setIsEditing:o,getStyles:i,nodeData:a}=e,l=i("string",a),{canEdit:s}=le({props:e});return t("div",{onDoubleClick:()=>o(!0),onClick:e=>{(e.getModifierState("Control")||e.getModifierState("Meta"))&&o(!0)},className:"jer-value-string jer-hyperlink",style:l,children:t("a",{href:r,target:"_blank",rel:"noreferrer",style:{color:null!==(n=l.color)&&void 0!==n?n:void 0},children:t(B,Object.assign({},e,{nodeData:a,pathString:j(a.path),styles:l,canEdit:s}))})})},Se={condition:({value:e})=>"string"==typeof e&&/^https?:\/\/.+\..+$/.test(e),element:Oe,showOnView:!0,showOnEdit:!1},Ne={displayName:"Github Dark",styles:{container:{backgroundColor:"#0d1117",color:"white"},dropZone:"rgba(165, 214, 255, 0.17)",property:"#E6EDF3",bracket:"#56d364",itemCount:"#8B949E",string:"#A5D6FF",number:"#D2A8FF",boolean:{color:"#FF7B72",fontSize:"90%",fontWeight:"bold"},null:"green",iconCollection:"#D2A8FF",iconEdit:"#D2A8FF",iconDelete:"rgb(203, 75, 22)",iconAdd:"rgb(203, 75, 22)",iconCopy:"#A5D6FF",iconOk:"#56d364",iconCancel:"rgb(203, 75, 22)"}},xe={displayName:"Github Light",styles:{container:"white",property:"#1F2328",bracket:"#00802e",itemCount:"#8B949E",string:"#0A3069",number:"#953800",boolean:{color:"#CF222E",fontSize:"90%",fontWeight:"bold"},null:"#FF7B72",iconCollection:"#8250DF",iconEdit:"#8250DF",iconDelete:"rgb(203, 75, 22)",iconAdd:"#8250DF",iconCopy:"#57606A"}},Ae={displayName:"Black & White",fragments:{lightText:{color:"white"},midGrey:"#5c5c5c"},styles:{container:["lightText",{backgroundColor:"black"}],dropZone:"#e0e0e029",property:"lightText",bracket:"midGrey",itemCount:"#4a4a4a",string:"#a8a8a8",number:"#666666",boolean:{color:"#848484",fontStyle:"italic"},null:"#333333",iconCollection:"midGrey",iconEdit:"midGrey",iconDelete:"midGrey",iconAdd:"midGrey",iconCopy:"midGrey",iconOk:"midGrey",iconCancel:"midGrey"}},Te={fragments:{midGrey:"#a3a3a3"},displayName:"White & Black",styles:{container:"white",property:"black",bracket:"midGrey",itemCount:"#b5b5b5",string:"#575757",number:"#999999",boolean:{color:"#7b7b7b",fontStyle:"italic"},null:"#cccccc",iconCollection:"midGrey",iconEdit:"midGrey",iconDelete:"midGrey",iconAdd:"midGrey",iconCopy:"midGrey",iconOk:"midGrey",iconCancel:"midGrey"}},Re={displayName:"Candy Wrapper",fragments:{minty:{backgroundColor:"#F1FAEE"},pale:{color:"#A8DADC"},mid:{color:"#457B9D"},dark:{color:"#1D3557"},pop:{color:"#E63946"},darkBlue:{color:"#2B2D42"}},styles:{container:"minty",property:"pop",dropZone:"#eb121217",bracket:"dark",itemCount:"pale",string:"mid",number:["darkBlue",{fontSize:"85%"}],boolean:["mid",{fontStyle:"italic",fontWeight:"bold",fontSize:"80%"}],null:["#cccccc",{fontWeight:"bold"}],input:{border:"1px solid rgb(115, 194, 198)"},iconCollection:"#1D3557",iconEdit:"#457B9D",iconDelete:"#E63946",iconAdd:"#2B2D42",iconCopy:"#1D3557",iconCancel:"#E63946"}},Ke={displayName:"Psychedelic",fragments:{pale:{color:"#A8DADC"},fluroYellow:"rgb(242, 228, 21)",fluroGreen:"rgb(68, 255, 62)",hotPink:"#f7379a"},styles:{container:{backgroundColor:"unset",background:"linear-gradient(90deg, hsla(333, 100%, 53%, 1) 0%, hsla(33, 94%, 57%, 1) 100%)",color:"black"},dropZone:"fluroYellow",property:"black",bracket:"fluroYellow",itemCount:["pale",{opacity:.7}],string:"white",number:["#33d9ff",{fontSize:"90%",fontWeight:"bold"}],boolean:["fluroGreen",{fontWeight:"bold",fontSize:"80%"}],null:["black",{fontWeight:"bold",opacity:.3,backgroundColor:"rgb(255, 255, 255, 0.5)",padding:"0 0.4em",borderRadius:"0.4em"}],iconCollection:"fluroYellow",iconEdit:["black"],iconDelete:["white",{opacity:.5}],iconAdd:["white",{opacity:.5}],iconCopy:"rgb(32, 84, 242)",iconOk:"fluroGreen",iconCancel:"hotPink"}};export{$ as IconAdd,q as IconCancel,ee as IconChevron,X as IconCopy,Z as IconDelete,J as IconEdit,Q as IconOk,Ee as JsonEditor,Oe as LinkCustomComponent,Se as LinkCustomNodeDefinition,B as StringDisplay,Re as candyWrapperTheme,x as defaultTheme,Ne as githubDarkTheme,xe as githubLightTheme,m as isCollection,b as matchNode,v as matchNodeKey,Ae as monoDarkTheme,Te as monoLightTheme,Ke as psychedelicTheme,ie as standardDataTypes};
