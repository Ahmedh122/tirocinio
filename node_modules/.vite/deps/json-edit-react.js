import {
  require_jsx_runtime
} from "./chunk-7BUGFXDR.js";
import {
  require_react
} from "./chunk-CMM6OKGN.js";
import {
  __toESM
} from "./chunk-OL46QLBJ.js";

// node_modules/json-edit-react/build/index.esm.js
var import_jsx_runtime = __toESM(require_jsx_runtime());
var import_react = __toESM(require_react());

// node_modules/object-property-assigner/build/index.esm.js
var r = (r4, e4, t4, n3, o3) => {
  if (!n3) throw new Error(null != o3 ? o3 : `Invalid property path: ${e4}
Couldn't access "${t4}" in ${JSON.stringify(r4)}`);
};
var e = (r4) => "object" == typeof r4 && null !== r4 && !Array.isArray(r4);
var t = (r4) => Array.isArray(r4);
var n = (r4, e4) => r4.filter((r5, t4) => t4 !== e4);
var o = (r4, e4, o3, a3 = {}) => {
  const { remove: s3 = false, createNew: l2 = true, noError: f2 = false } = a3, u = r4, c2 = "string" == typeof (y2 = e4) ? y2 : "number" == typeof y2 ? String(y2) : y2.reduce((r5, e5) => "number" == typeof e5 ? `${r5}[${e5}]` : "" === r5 ? e5 : `${r5}.${e5}`, "");
  var y2;
  const p2 = Object.assign(Object.assign({}, a3), { remove: s3, createNew: l2, noError: f2, fullData: u, fullPath: c2 }), m2 = Array.isArray(e4) ? e4 : ((r5) => Array.isArray(r5) ? r5 : r5.split(/(\.|\[\d+\])/).filter((r6) => "." !== r6 && "" !== r6).map((r6) => {
    const e5 = /\[(\d+)\]/.exec(r6);
    return e5 ? Number(e5[1]) : r6;
  }).flat())(e4).filter((r5) => "" !== r5);
  return t(r4) && s3 && 1 === m2.length ? n(r4, m2[0]) : i(r4, m2, o3, p2);
};
var i = (o3, l2, f2, u) => {
  const c2 = e(o3) ? Object.assign({}, o3) : null, y2 = t(o3) ? [...o3] : null;
  if (0 === l2.length) return o3;
  if (!c2 && !y2) throw new Error("Can't assign property -- invalid input object");
  const { createNew: p2, remove: m2, noError: b2, fullData: g2, fullPath: h2 } = u, d = l2[0];
  if (y2 && "string" == typeof d) return y2.map((r4) => i(r4, l2, f2, u));
  if (1 === l2.length) {
    if (c2 && "string" == typeof d) {
      const r4 = a(c2, d, f2, u);
      return null != r4 ? r4 : c2;
    }
    return y2 && "number" == typeof d ? (s(y2, d, f2, u), y2) : (r(g2, h2, d, b2), o3);
  }
  const v2 = c2 || y2 || [];
  if (m2 && 2 === l2.length && "number" == typeof l2[1]) {
    const e4 = v2[d], o4 = l2[1];
    return t(e4) ? v2[d] = n(e4, o4) : r(g2, h2, d, b2, "Trying to remove an indexed item from an object that is not an array"), v2;
  }
  const A2 = l2.slice(1);
  if (d in o3) {
    if (w2 = v2[d], !t(w2) && !e(w2)) {
      if (!p2) return r(g2, h2, d, b2), v2;
      v2[d] = {};
    }
    return v2[d] = i(v2[d], A2, f2, u), v2;
  }
  var w2;
  if (p2) {
    const r4 = "number" == typeof A2[0] ? [] : {};
    if (c2) return v2[d] = r4, v2[d] = i(v2[d], A2, f2, u), v2;
    if (y2 && Array.isArray(v2)) {
      v2.push(r4);
      const e4 = v2.length - 1;
      return v2[e4] = i(v2[e4], A2, f2, u), v2;
    }
  }
  return r(g2, h2, d, b2), v2;
};
var a = (e4, t4, n3, o3) => {
  const { remove: i3, createNew: a3, noError: s3, insertAfter: l2, insertBefore: f2, fullData: u, fullPath: c2 } = o3;
  if (void 0 !== f2 || void 0 !== l2) {
    const r4 = Object.entries(e4);
    let o4 = 1 / 0;
    return o4 = "number" == typeof f2 ? f2 : "number" == typeof l2 ? l2 : r4.findIndex(([r5, e5]) => r5 === (null != f2 ? f2 : l2)), l2 && o4++, r4.splice(o4, 0, [t4, n3]), Object.fromEntries(r4);
  }
  const y2 = t4 in e4;
  i3 ? y2 ? delete e4[t4] : r(u, c2, t4, s3) : a3 || y2 ? e4[t4] = n3 : r(u, c2, t4, s3);
};
var s = (e4, t4, n3, o3) => {
  const { noError: i3, fullData: a3, fullPath: s3, createNew: l2, insert: f2 } = o3;
  f2 && e4.splice(t4, 0, n3), t4 in e4 ? e4[t4] = n3 : l2 ? e4.push(n3) : r(a3, s3, t4, i3);
};

// node_modules/object-property-extractor/build/index.esm.js
var r2 = (n3, o3, i3) => {
  const a3 = Array.isArray(o3) ? o3 : t2(o3);
  if (0 === a3.length) return n3;
  const c2 = a3[0];
  if (Array.isArray(n3) && "number" != typeof c2) return n3.map((t4) => r2(t4, a3, i3));
  if ("object" != typeof n3 || null === n3 || !(c2 in n3)) return e2(n3, c2, i3);
  const f2 = n3[c2];
  return 1 === a3.length ? f2 : r2(f2, a3.slice(1), i3);
};
var t2 = (r4) => r4.split(/(\.|\[\d+\])/).filter((r5) => "." !== r5 && "" !== r5).map((r5) => {
  const t4 = /\[(\d+)\]/.exec(r5);
  return t4 ? Number(t4[1]) : r5;
}).flat();
var e2 = (r4, t4, e4) => {
  if (void 0 === e4) throw new Error(`Unable to extract object property
Looking for property: ${t4}
In object: ${JSON.stringify(r4)}`);
  return e4;
};

// node_modules/json-edit-react/build/index.esm.js
function p(e4, t4) {
  var n3 = {};
  for (var r4 in e4) Object.prototype.hasOwnProperty.call(e4, r4) && t4.indexOf(r4) < 0 && (n3[r4] = e4[r4]);
  if (null != e4 && "function" == typeof Object.getOwnPropertySymbols) {
    var o3 = 0;
    for (r4 = Object.getOwnPropertySymbols(e4); o3 < r4.length; o3++) t4.indexOf(r4[o3]) < 0 && Object.prototype.propertyIsEnumerable.call(e4, r4[o3]) && (n3[r4[o3]] = e4[r4[o3]]);
  }
  return n3;
}
function g(e4, t4, n3, r4) {
  return new (n3 || (n3 = Promise))(function(o3, i3) {
    function a3(e5) {
      try {
        s3(r4.next(e5));
      } catch (e6) {
        i3(e6);
      }
    }
    function l2(e5) {
      try {
        s3(r4.throw(e5));
      } catch (e6) {
        i3(e6);
      }
    }
    function s3(e5) {
      var t5;
      e5.done ? o3(e5.value) : (t5 = e5.value, t5 instanceof n3 ? t5 : new n3(function(e6) {
        e6(t5);
      })).then(a3, l2);
    }
    s3((r4 = r4.apply(e4, t4 || [])).next());
  });
}
var h = ({ className: n3, name: r4, value: o3, setValue: i3, handleKeyPress: a3, styles: l2, textAreaRef: s3 }) => {
  if ("string" != typeof o3) return null;
  const c2 = "\n" === o3.slice(-1) ? o3 + "." : o3;
  return (0, import_jsx_runtime.jsxs)("div", { style: { display: "grid" }, children: [(0, import_jsx_runtime.jsx)("textarea", { id: `${r4}_textarea`, ref: s3, style: Object.assign({ height: "auto", gridArea: "1 / 1 / 2 / 2", overflowY: "auto", whiteSpace: "pre-wrap" }, l2), rows: 1, className: n3, name: `${r4}_textarea`, value: o3, onChange: (e4) => i3(e4.target.value), autoFocus: true, onFocus: (e4) => {
    o3.length < 40 && e4.target.select();
  }, onKeyDown: a3 }), (0, import_jsx_runtime.jsx)("span", { className: n3, style: Object.assign({ visibility: "hidden", height: "auto", gridArea: "1 / 1 / 2 / 2", color: "red", opacity: 0.9, whiteSpace: "pre-wrap", overflowY: "auto", border: "1px solid transparent" }, l2), children: c2 })] });
};
var m = (e4) => null !== e4 && "object" == typeof e4;
var y = (e4, t4, n3, r4 = "") => {
  if (!n3 && !r4) return true;
  switch (e4) {
    case "collection":
      if (n3) {
        if (n3(t4, r4)) return true;
        if (!f(r4, t4, n3)) return false;
      }
      if (!n3 && r4 && !f(r4, t4)) return false;
      break;
    case "value":
      if (n3 && !n3(t4, r4)) return false;
      if (!n3 && r4 && !b(t4, r4)) return false;
  }
  return true;
};
var f = (e4 = "", t4, n3 = b) => {
  const r4 = t4.value;
  return Object.entries(r4).some(([o3, i3]) => {
    const a3 = [...t4.path, o3], l2 = Object.assign(Object.assign({}, t4), { key: o3, path: a3, level: t4.level + 1, value: i3, size: a3.length, parentData: r4 });
    return m(i3) ? f(e4, l2, n3) : n3(l2, e4);
  });
};
var b = (e4, t4 = "") => {
  const { value: n3 } = e4;
  if (null === n3 && "null".includes(t4.toLowerCase())) return true;
  switch (typeof n3) {
    case "string":
      return n3.toLowerCase().includes(t4.toLowerCase());
    case "number":
      return !!String(n3).includes(t4);
    case "boolean":
      return n3 ? "true".includes(t4.toLowerCase()) || "1" === t4 : "false".includes(t4.toLowerCase()) || "0" === t4;
    default:
      return false;
  }
};
var v = ({ key: e4, path: t4 }, n3 = "") => !!b({ value: e4 }, n3) || !!t4.some((e5) => b({ value: e5 }, n3));
var j = (e4, t4) => (null != t4 ? t4 : "") + e4.map((e5) => "" === e5 ? String.fromCharCode(0) : e5).join(".");
var E = (e4) => e4.shiftKey ? "Shift" : e4.metaKey ? "Meta" : e4.ctrlKey ? "Control" : e4.altKey ? "Alt" : void 0;
var w = (e4, t4, n3) => {
  const r4 = e4.key, o3 = E(e4);
  if (Array.isArray(t4)) return !!o3 && t4.includes(o3);
  const { key: i3, modifier: a3 } = t4;
  return ("stringLineBreak" !== n3 || "Enter" !== r4 || "Shift" !== o3 || "Enter" !== i3 || !(null == a3 ? void 0 : a3.includes("Shift"))) && (r4 === i3 && (a3 === o3 || Array.isArray(a3) && a3.includes(o3)));
};
var D = { key: "Enter" };
var C = { confirm: D, cancel: { key: "Escape" }, objectConfirm: Object.assign(Object.assign({}, D), { modifier: ["Meta", "Shift", "Control"] }), objectLineBreak: D, stringConfirm: D, stringLineBreak: Object.assign(Object.assign({}, D), { modifier: ["Shift"] }), numberConfirm: D, numberUp: { key: "ArrowUp" }, numberDown: { key: "ArrowDown" }, tabForward: { key: "Tab" }, tabBack: { key: "Tab", modifier: "Shift" }, booleanConfirm: D, booleanToggle: { key: " " }, clipboardModifier: ["Meta", "Control"], collapseModifier: ["Alt"] };
var k = (e4, t4, n3 = "next", r4) => {
  const o3 = t4.slice(0, t4.length - 1), i3 = t4.slice(-1)[0];
  if (void 0 === i3) return null;
  const a3 = r2(e4, o3), l2 = S(a3);
  Array.isArray(a3) || r4(l2, ({ key: e5, value: t5 }) => [e5, t5]);
  const s3 = l2.findIndex((e5) => e5.key === i3), c2 = l2[s3 + ("next" === n3 ? 1 : -1)];
  return c2 ? m(c2.value) ? 0 === Object.keys(c2.value).length ? k(e4, [...o3, c2.key], n3, r4) : O(e4, [...o3, c2.key], n3, r4) : [...o3, c2.key] : 0 === o3.length ? null : k(e4, o3, n3, r4);
};
var O = (e4, t4, n3 = "next", r4) => {
  const o3 = r2(e4, t4);
  if (!m(o3)) return t4;
  const i3 = Array.isArray(o3) ? o3.map((e5, t5) => t5) : Object.keys(o3);
  r4(i3, (e5) => [e5, o3]);
  const a3 = "next" === n3 ? i3[0] : i3[i3.length - 1];
  return O(e4, [...t4, a3], n3, r4);
};
var S = (e4) => Array.isArray(e4) ? e4.map((e5, t4) => ({ index: t4, value: e5, key: t4 })) : Object.entries(e4).map(([e5, t4], n3) => ({ key: e5, value: t4, index: n3 }));
var N = (e4, t4) => {
  var n3, r4, o3, i3;
  const a3 = e4.current, l2 = null !== (n3 = null == a3 ? void 0 : a3.selectionStart) && void 0 !== n3 ? n3 : 1 / 0, s3 = null !== (r4 = null == a3 ? void 0 : a3.selectionEnd) && void 0 !== r4 ? r4 : 1 / 0, c2 = (null === (o3 = null == a3 ? void 0 : a3.textContent) || void 0 === o3 ? void 0 : o3.slice(0, l2)) + t4 + (null === (i3 = null == a3 ? void 0 : a3.textContent) || void 0 === i3 ? void 0 : i3.slice(s3));
  return a3.value = c2, null == a3 || a3.setSelectionRange(l2 + 1, l2 + 1), c2;
};
var x = { displayName: "Default", fragments: { edit: "rgb(42, 161, 152)" }, styles: { container: { backgroundColor: "#f6f6f6", fontFamily: "monospace" }, collection: {}, collectionInner: {}, collectionElement: {}, dropZone: {}, property: "#292929", bracket: { color: "rgb(0, 43, 54)", fontWeight: "bold" }, itemCount: { color: "rgba(0, 0, 0, 0.3)", fontStyle: "italic" }, string: "rgb(203, 75, 22)", number: "rgb(38, 139, 210)", boolean: "green", null: { color: "rgb(220, 50, 47)", fontVariant: "small-caps", fontWeight: "bold" }, input: ["#292929"], inputHighlight: "#b3d8ff", error: { fontSize: "0.8em", color: "red", fontWeight: "bold" }, iconCollection: "rgb(0, 43, 54)", iconEdit: "edit", iconDelete: "rgb(203, 75, 22)", iconAdd: "edit", iconCopy: "rgb(38, 139, 210)", iconOk: "green", iconCancel: "rgb(203, 75, 22)" } };
var A = (0, import_react.createContext)({ getStyles: () => ({}), icons: {} });
var T = ({ theme: e4 = x, icons: n3 = {}, docRoot: r4, children: o3 }) => {
  const i3 = K(e4, r4);
  return (0, import_jsx_runtime.jsx)(A.Provider, { value: { getStyles: (e5, t4) => "function" == typeof i3[e5] ? i3[e5](t4) : i3[e5], icons: n3 }, children: o3 });
};
var R = () => (0, import_react.useContext)(A);
var K = (e4, t4) => {
  var n3, r4, o3, i3;
  const a3 = {}, l2 = (Array.isArray(e4) ? e4 : [e4]).map((e5) => V(e5) ? P({ fragments: {}, styles: e5 }, a3) : P(e5, a3)), s3 = P(x, {});
  Object.keys(s3).forEach((e5) => {
    const t5 = e5;
    l2.forEach((e6) => {
      e6[t5] && (s3[t5] = Object.assign(Object.assign({}, s3[t5]), e6[t5]));
    });
  });
  const c2 = Object.assign({}, s3);
  return Object.entries(a3).forEach(([e5, t5]) => {
    const n4 = e5;
    c2[n4] = (e6) => {
      const r5 = t5(e6) || {};
      return Object.assign(Object.assign({}, s3[n4]), r5);
    };
  }), "function" != typeof (null == c2 ? void 0 : c2.inputHighlight) && (null === (n3 = null == c2 ? void 0 : c2.inputHighlight) || void 0 === n3 ? void 0 : n3.backgroundColor) && t4.style.setProperty("--jer-highlight-color", null === (r4 = null == c2 ? void 0 : c2.inputHighlight) || void 0 === r4 ? void 0 : r4.backgroundColor), "function" != typeof (null == c2 ? void 0 : c2.iconCopy) && (null === (o3 = null == c2 ? void 0 : c2.iconCopy) || void 0 === o3 ? void 0 : o3.color) && t4.style.setProperty("--jer-icon-copy-color", null === (i3 = null == c2 ? void 0 : c2.iconCopy) || void 0 === i3 ? void 0 : i3.color), c2;
};
var P = (e4, t4) => {
  const { fragments: n3, styles: r4 } = e4, o3 = {};
  return Object.entries(r4).forEach(([e5, r5]) => {
    const i3 = (Array.isArray(r5) ? r5 : [r5]).reduce((r6, o4) => {
      var i4, a3;
      if ("function" == typeof o4) return t4[e5] = o4, Object.assign({}, r6);
      if ("string" == typeof o4) {
        const t5 = null !== (i4 = null == n3 ? void 0 : n3[o4]) && void 0 !== i4 ? i4 : o4;
        return "string" == typeof t5 ? Object.assign(Object.assign({}, r6), { [null !== (a3 = z[e5]) && void 0 !== a3 ? a3 : "color"]: t5 }) : Object.assign(Object.assign({}, r6), t5);
      }
      return Object.assign(Object.assign({}, r6), o4);
    }, {});
    o3[e5] = i3;
  }), o3;
};
var V = (e4) => !("styles" in e4);
var z = { container: "backgroundColor", collection: "backgroundColor", collectionInner: "backgroundColor", collectionElement: "backgroundColor", dropZone: "borderColor", inputHighlight: "backgroundColor" };
var _ = (0, import_react.createContext)(null);
var F = ({ children: e4, onEditEvent: n3, onCollapse: r4 }) => {
  const [o3, l2] = (0, import_react.useState)(null), [s3, c2] = (0, import_react.useState)(null), [d, u] = (0, import_react.useState)(null), [p2, g2] = (0, import_react.useState)({ path: null, pathString: null }), h2 = (0, import_react.useRef)(null), m2 = (0, import_react.useRef)("next"), y2 = (0, import_react.useRef)(null);
  return (0, import_jsx_runtime.jsx)(_.Provider, { value: { collapseState: o3, setCollapseState: (e5) => {
    l2(e5), r4 && null !== e5 && (Array.isArray(e5) ? e5.forEach((e6) => r4(e6)) : r4(e5)), null !== e5 && setTimeout(() => l2(null), 2e3);
  }, getMatchingCollapseState: (e5) => {
    if (Array.isArray(o3)) {
      for (const t4 of o3) if (L(e5, t4)) return t4;
      return null;
    }
    return L(e5, o3) ? o3 : null;
  }, currentlyEditingElement: s3, setCurrentlyEditingElement: (e5, t4) => {
    const r5 = "string" == typeof e5 || null === e5 ? e5 : j(e5, "key" === t4 ? "key_" : void 0);
    null !== s3 && null !== r5 && null !== h2.current && h2.current(), c2(r5), n3 && n3(e5, "key" === t4), h2.current = "function" == typeof t4 ? t4 : null;
  }, areChildrenBeingEdited: (e5) => null !== s3 && s3.includes(e5), previouslyEditedElement: y2.current, setPreviouslyEditedElement: (e5) => {
    y2.current = e5;
  }, tabDirection: m2.current, setTabDirection: (e5) => {
    m2.current = e5;
  }, previousValue: d, setPreviousValue: u, dragSource: p2, setDragSource: g2 }, children: e4 });
};
var M = () => {
  const e4 = (0, import_react.useContext)(_);
  if (!e4) throw new Error("Missing Context Provider");
  return e4;
};
var L = (e4, t4) => {
  if (null === t4) return false;
  if (!t4.includeChildren) return t4.path.every((t5, n3) => e4[n3] === t5) && t4.path.length === e4.length;
  for (const [n3, r4] of t4.path.entries()) if (r4 !== e4[n3]) return false;
  return true;
};
var I = "**INVALID_FUNCTION**";
var B = ({ nodeData: r4, showStringQuotes: o3 = true, stringTruncate: a3 = 200, pathString: l2, canEdit: s3, setIsEditing: c2, styles: d, translate: u }) => {
  const p2 = r4.value, [g2, h2] = (0, import_react.useState)(false), m2 = o3 ? '"' : "", y2 = p2.length > a3, f2 = () => {
    s3 ? c2(true) : h2(!g2);
  };
  return (0, import_jsx_runtime.jsxs)("div", { id: `${l2}_display`, onDoubleClick: f2, onClick: (e4) => {
    (e4.getModifierState("Control") || e4.getModifierState("Meta")) && f2();
  }, className: "jer-value-string", style: d, children: [m2, y2 ? (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, g2 ? { children: [(0, import_jsx_runtime.jsxs)("span", { children: [p2, m2] }), (0, import_jsx_runtime.jsxs)("span", { className: "jer-string-expansion jer-show-less", onClick: () => h2(false), children: [" ", u("SHOW_LESS", r4)] })] } : { children: [(0, import_jsx_runtime.jsx)("span", { children: p2.slice(0, a3 - 2).trimEnd() }), (0, import_jsx_runtime.jsx)("span", { className: "jer-string-expansion jer-ellipsis", onClick: () => h2(true), children: "..." }), m2] }) : `${p2}${m2}`] });
};
var W = (n3) => {
  var { value: r4, setValue: o3, isEditing: i3, path: l2, handleEdit: s3, nodeData: c2, handleKeyboard: d, keyboardCommon: u, enumType: g2 } = n3, m2 = p(n3, ["value", "setValue", "isEditing", "path", "handleEdit", "nodeData", "handleKeyboard", "keyboardCommon", "enumType"]);
  const { getStyles: y2 } = R(), f2 = (0, import_react.useRef)(null), b2 = j(l2);
  return i3 && g2 ? (0, import_jsx_runtime.jsxs)("div", { className: "jer-select jer-select-enums", children: [(0, import_jsx_runtime.jsx)("select", { name: `${b2}-value-select`, className: "jer-select-inner", onChange: (e4) => o3(e4.target.value), value: r4, autoFocus: true, onKeyDown: (e4) => {
    d(e4, Object.assign({ stringConfirm: s3 }, u));
  }, children: g2.values.map((e4) => (0, import_jsx_runtime.jsx)("option", { value: e4, children: e4 }, e4)) }), (0, import_jsx_runtime.jsx)("span", { className: "focus" })] }) : i3 ? (0, import_jsx_runtime.jsx)(h, { className: "jer-input-text", textAreaRef: f2, name: b2, value: r4, setValue: o3, isEditing: i3, handleKeyPress: (e4) => {
    d(e4, Object.assign({ stringConfirm: s3, stringLineBreak: () => {
      const e5 = N(f2, "\n");
      o3(e5);
    } }, u));
  }, styles: y2("input", c2) }) : (0, import_jsx_runtime.jsx)(B, Object.assign({ nodeData: c2, pathString: b2, styles: y2("string", c2) }, m2));
};
var G = ({ value: e4, setValue: n3, isEditing: r4, path: o3, setIsEditing: i3, handleEdit: a3, nodeData: l2, handleKeyboard: s3, keyboardCommon: c2 }) => {
  const { getStyles: d } = R();
  return r4 ? (0, import_jsx_runtime.jsx)("input", { className: "jer-input-number", type: "text", name: j(o3), value: e4, onChange: (e5) => n3(e5.target.value.replace(/[^0-9.-]/g, "")), autoFocus: true, onFocus: (e5) => setTimeout(() => e5.target.select(), 10), onKeyDown: (t4) => s3(t4, Object.assign({ numberConfirm: a3, numberUp: () => n3(Number(e4) + 1), numberDown: () => n3(Number(e4) - 1) }, c2)), style: Object.assign({ width: String(e4).length / 1.5 + 2 + "em" }, d("input", l2)) }) : (0, import_jsx_runtime.jsx)("span", { onDoubleClick: () => i3(true), className: "jer-value-number", style: d("number", l2), children: e4 });
};
var Y = ({ value: e4, setValue: n3, isEditing: r4, path: o3, setIsEditing: i3, handleEdit: a3, nodeData: l2, handleKeyboard: s3, keyboardCommon: c2 }) => {
  const { getStyles: d } = R();
  return r4 ? (0, import_jsx_runtime.jsx)("input", { className: "jer-input-boolean", type: "checkbox", name: j(o3), checked: e4, onChange: () => n3(!e4), onKeyDown: (t4) => {
    " " === t4.key && t4.preventDefault(), s3(t4, Object.assign({ booleanConfirm: a3, booleanToggle: () => n3(!e4) }, c2));
  }, autoFocus: true }) : (0, import_jsx_runtime.jsx)("span", { onDoubleClick: () => i3(true), className: "jer-value-boolean", style: d("boolean", l2), children: String(e4) });
};
var H = ({ value: e4, isEditing: n3, setIsEditing: r4, handleEdit: o3, nodeData: i3, handleKeyboard: s3, keyboardCommon: c2 }) => {
  const { getStyles: d } = R(), u = (0, import_react.useRef)();
  (0, import_react.useEffect)(() => {
    if (n3) return u.current = window.setTimeout(() => window.addEventListener("keydown", p2), 100), () => window.removeEventListener("keydown", p2);
    window.clearTimeout(u.current);
  }, [n3]);
  const p2 = (e5) => s3(e5, Object.assign({ confirm: o3 }, c2));
  return (0, import_jsx_runtime.jsx)("div", { onDoubleClick: () => r4(true), className: "jer-value-null", style: d("null", i3), children: String(e4) });
};
var U = ({ value: e4 }) => {
  let n3 = "Error!";
  switch (typeof e4) {
    case "string":
      e4 === I && (n3 = "Function");
      break;
    case "undefined":
      n3 = "Undefined";
      break;
    case "symbol":
      n3 = "Symbol";
  }
  return (0, import_jsx_runtime.jsx)("span", { className: "jer-value-invalid", children: n3 });
};
var $ = ({ size: n3, style: r4, className: o3 }) => (0, import_jsx_runtime.jsxs)("svg", { viewBox: "0 0 24 24", fill: "currentColor", width: n3, height: n3, className: o3, style: r4, children: [(0, import_jsx_runtime.jsx)("path", { d: "M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4z" }), (0, import_jsx_runtime.jsx)("path", { d: "M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z" })] });
var J = ({ size: n3, style: r4, className: o3 }) => (0, import_jsx_runtime.jsxs)("svg", { viewBox: "0 0 24 24", fill: "currentColor", width: n3, height: n3, className: o3, style: r4, transform: "translate(0, 0.5)", children: [(0, import_jsx_runtime.jsx)("path", { d: "M7 17.013l4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z" }), (0, import_jsx_runtime.jsx)("path", { d: "M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z" })] });
var Z = ({ size: e4, style: n3, className: r4 }) => (0, import_jsx_runtime.jsx)("svg", { viewBox: "0 0 24 24", fill: "currentColor", width: e4, height: e4, className: r4, style: n3, children: (0, import_jsx_runtime.jsx)("path", { d: "M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12m2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12M15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z" }) });
var X = ({ size: n3, style: r4, className: o3 }) => (0, import_jsx_runtime.jsxs)("svg", { fill: "none", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, viewBox: "0 0 24 24", width: n3, height: n3, className: o3, style: r4, children: [(0, import_jsx_runtime.jsx)("path", { d: "M9 2 H15 A1 1 0 0 1 16 3 V5 A1 1 0 0 1 15 6 H9 A1 1 0 0 1 8 5 V3 A1 1 0 0 1 9 2 z" }), (0, import_jsx_runtime.jsx)("path", { d: "M8 4H6a2 2 0 00-2 2v14a2 2 0 002 2h12a2 2 0 002-2v-2M16 4h2a2 2 0 012 2v4M21 14H11" }), (0, import_jsx_runtime.jsx)("path", { d: "M15 10l-4 4 4 4" })] });
var Q = ({ size: n3, style: r4, className: o3 }) => (0, import_jsx_runtime.jsxs)("svg", { fill: "none", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, viewBox: "0 0 24 24", width: n3, height: n3, className: o3, style: r4, children: [(0, import_jsx_runtime.jsx)("path", { d: "M22 11.08V12a10 10 0 11-5.93-9.14" }), (0, import_jsx_runtime.jsx)("path", { d: "M22 4L12 14.01l-3-3" })] });
var q = ({ size: e4, style: n3, className: r4 }) => (0, import_jsx_runtime.jsx)("svg", { baseProfile: "tiny", viewBox: "0 0 24 24", fill: "currentColor", width: e4, height: e4, className: r4, style: n3, children: (0, import_jsx_runtime.jsx)("path", { d: "M12 4c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm-5 8c0-.832.224-1.604.584-2.295l6.711 6.711A4.943 4.943 0 0112 17c-2.757 0-5-2.243-5-5zm9.416 2.295L9.705 7.584A4.943 4.943 0 0112 7c2.757 0 5 2.243 5 5 0 .832-.224 1.604-.584 2.295z" }) });
var ee = ({ size: e4, style: n3, className: r4 }) => (0, import_jsx_runtime.jsx)("svg", { viewBox: "0 0 512 512", fill: "currentColor", width: e4, height: e4, className: r4, style: n3, children: (0, import_jsx_runtime.jsx)("path", { d: "M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" }) });
var te = ({ name: e4, nodeData: r4, rotate: o3 }) => {
  var i3, a3, l2, s3, c2, d, u;
  const { getStyles: p2, icons: g2 } = R(), h2 = { size: "1.4em", className: "jer-icon" };
  switch (e4) {
    case "add":
      return null !== (i3 = null == g2 ? void 0 : g2.add) && void 0 !== i3 ? i3 : (0, import_jsx_runtime.jsx)($, Object.assign({}, h2, { style: p2("iconAdd", r4) }));
    case "edit":
      return null !== (a3 = null == g2 ? void 0 : g2.edit) && void 0 !== a3 ? a3 : (0, import_jsx_runtime.jsx)(J, Object.assign({}, h2, { style: p2("iconEdit", r4) }));
    case "delete":
      return null !== (l2 = null == g2 ? void 0 : g2.delete) && void 0 !== l2 ? l2 : (0, import_jsx_runtime.jsx)(Z, Object.assign({}, h2, { style: p2("iconDelete", r4), size: "1.45em" }));
    case "copy":
      return null !== (s3 = null == g2 ? void 0 : g2.copy) && void 0 !== s3 ? s3 : (0, import_jsx_runtime.jsx)(X, Object.assign({}, h2, { style: p2("iconCopy", r4), size: "1.2em" }));
    case "ok":
      return null !== (c2 = null == g2 ? void 0 : g2.ok) && void 0 !== c2 ? c2 : (0, import_jsx_runtime.jsx)(Q, Object.assign({}, h2, { style: Object.assign({ fontSize: "90%" }, p2("iconOk", r4)) }));
    case "cancel":
      return null !== (d = null == g2 ? void 0 : g2.cancel) && void 0 !== d ? d : (0, import_jsx_runtime.jsx)(q, Object.assign({}, h2, { style: Object.assign({ fontSize: "130%" }, p2("iconCancel", r4)) }));
    case "chevron":
      return null !== (u = null == g2 ? void 0 : g2.chevron) && void 0 !== u ? u : (0, import_jsx_runtime.jsx)(ee, { size: "1em", style: p2("iconCollection", r4) });
    default:
      return (0, import_jsx_runtime.jsx)(import_jsx_runtime.Fragment, {});
  }
};
var ne = ({ startEdit: r4, handleDelete: o3, handleAdd: a3, enableClipboard: l2, type: s3, customButtons: c2, nodeData: d, translate: p2, keyboardControls: g2, handleKeyboard: h2, editConfirmRef: m2, getNewKeyOptions: y2 }) => {
  const { getStyles: f2 } = R(), b2 = p2("KEY_NEW", d), [v2, j2] = (0, import_react.useState)(b2), [w2, D2] = (0, import_react.useState)(false), { key: C2, path: k2, value: O2 } = d, S2 = Array.isArray(w2), N2 = (e4) => {
    var t4;
    if (!e4) return void D2(false);
    const n3 = Object.keys(r2(d.fullData, k2)), r5 = y2 ? null === (t4 = y2(d)) || void 0 === t4 ? void 0 : t4.filter((e5) => !n3.includes(e5)) : null;
    r5 && j2(""), D2(null == r5 || r5);
  };
  return (0, import_jsx_runtime.jsxs)("div", { className: "jer-edit-buttons", style: { opacity: w2 ? 1 : void 0 }, onClick: (e4) => e4.stopPropagation(), children: [l2 && (0, import_jsx_runtime.jsx)("div", { onClick: (e4) => {
    var t4;
    e4.stopPropagation();
    let n3, r5, o4 = "value", i3 = "", a4 = null;
    if (l2) {
      const c3 = E(e4);
      if (c3 && g2.clipboardModifier.includes(c3) ? (n3 = oe(k2), i3 = n3, o4 = "path") : (n3 = O2, i3 = s3 ? JSON.stringify(O2, null, 2) : String(n3)), !navigator.clipboard) return void ("function" == typeof l2 && l2({ success: false, value: n3, stringValue: i3, path: k2, key: C2, type: o4, errorMessage: "Can't access clipboard API" }));
      null === (t4 = navigator.clipboard) || void 0 === t4 || t4.writeText(i3).then(() => r5 = true).catch((e5) => {
        r5 = false, a4 = e5.message;
      }).finally(() => {
        "function" == typeof l2 && l2({ success: r5, errorMessage: a4, value: n3, stringValue: i3, path: k2, key: C2, type: o4 });
      });
    }
  }, className: "jer-copy-pulse", children: (0, import_jsx_runtime.jsx)(te, { name: "copy", nodeData: d }) }), r4 && (0, import_jsx_runtime.jsx)("div", { onClick: r4, children: (0, import_jsx_runtime.jsx)(te, { name: "edit", nodeData: d }) }), o3 && (0, import_jsx_runtime.jsx)("div", { onClick: o3, children: (0, import_jsx_runtime.jsx)(te, { name: "delete", nodeData: d }) }), a3 && (0, import_jsx_runtime.jsx)("div", { onClick: () => {
    "object" === s3 ? N2(true) : a3("");
  }, children: (0, import_jsx_runtime.jsx)(te, { name: "add", nodeData: d }) }), null == c2 ? void 0 : c2.map(({ Element: e4, onClick: n3 }, r5) => (0, import_jsx_runtime.jsx)("div", { onClick: (e5) => n3 && n3(d, e5), children: (0, import_jsx_runtime.jsx)(e4, { nodeData: d }) }, r5)), w2 && a3 && "object" === s3 && (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [S2 ? (0, import_jsx_runtime.jsxs)("div", { className: "jer-select jer-select-keys", children: [(0, import_jsx_runtime.jsxs)("select", { name: "new-key-select", className: "jer-select-inner", onChange: (e4) => {
    a3(e4.target.value), N2(false);
  }, defaultValue: "", autoFocus: true, onKeyDown: (e4) => {
    h2(e4, { cancel: () => N2(false) });
  }, children: [(0, import_jsx_runtime.jsx)("option", { value: "", disabled: true, children: w2.length > 0 ? p2("KEY_SELECT", d) : p2("NO_KEY_OPTIONS", d) }), w2.map((e4) => (0, import_jsx_runtime.jsx)("option", { value: e4, children: e4 }, e4))] }), (0, import_jsx_runtime.jsx)("span", { className: "focus" })] }) : (0, import_jsx_runtime.jsx)("input", { className: "jer-input-new-key", type: "text", name: "new-object-key", value: v2, onChange: (e4) => j2(e4.target.value), autoFocus: true, onFocus: (e4) => e4.target.select(), onKeyDown: (e4) => {
    h2(e4, { stringConfirm: () => {
      a3 && (N2(false), a3(v2), j2(b2));
    }, cancel: () => {
      N2(false), j2(b2);
    } });
  }, style: f2("input", d) }), (0, import_jsx_runtime.jsx)(re, { onOk: () => {
    S2 && !v2 || (N2(false), a3(v2));
  }, onCancel: () => {
    N2(false);
  }, nodeData: d, editConfirmRef: m2, hideOk: S2 })] })] });
};
var re = ({ onOk: n3, onCancel: r4, nodeData: o3, editConfirmRef: i3, hideOk: a3 = false }) => (0, import_jsx_runtime.jsxs)("div", { className: "jer-confirm-buttons", children: [!a3 && (0, import_jsx_runtime.jsx)("div", { onClick: n3, ref: i3, children: (0, import_jsx_runtime.jsx)(te, { name: "ok", nodeData: o3 }) }), (0, import_jsx_runtime.jsx)("div", { onClick: r4, children: (0, import_jsx_runtime.jsx)(te, { name: "cancel", nodeData: o3 }) })] });
var oe = (e4) => e4.reduce((e5, t4) => "number" == typeof t4 ? `${e5}[${t4}]` : "" === e5 ? t4 : `${e5}.${t4}`, "");
var ie = ["string", "number", "boolean", "null", "object", "array"];
var ae = (e4 = [], t4) => {
  const n3 = e4.filter(({ condition: e5 }) => e5(t4));
  if (0 === n3.length) return {};
  const r4 = n3[0], { element: o3, wrapperElement: i3, customNodeProps: a3, wrapperProps: l2, hideKey: s3 = false, showEditTools: c2 = true, showOnEdit: d = false, showOnView: u = true, showCollectionWrapper: g2 = true } = r4, h2 = p(r4, ["element", "wrapperElement", "customNodeProps", "wrapperProps", "hideKey", "showEditTools", "showOnEdit", "showOnView", "showCollectionWrapper"]);
  return Object.assign({ CustomNode: o3, CustomWrapper: i3, customNodeProps: a3, wrapperProps: l2, hideKey: s3, showEditTools: c2, showOnEdit: d, showOnView: u, showCollectionWrapper: g2 }, h2);
};
var le = ({ props: e4, collapsed: t4 }) => {
  const { data: n3, nodeData: r4, parentData: o3, onEdit: a3, onError: l2, showErrorMessages: d, restrictEditFilter: u, restrictDeleteFilter: p2, restrictAddFilter: g2, restrictDragFilter: h2, translate: m2, errorMessageTimeout: y2 } = e4, { currentlyEditingElement: f2, setCurrentlyEditingElement: b2 } = M(), [v2, E2] = (0, import_react.useState)(null), w2 = Object.assign(Object.assign({}, r4), { collapsed: t4 }), { path: D2, key: C2, size: k2 } = w2, O2 = j(D2), S2 = (0, import_react.useMemo)(() => !u(w2), [w2]), N2 = (0, import_react.useMemo)(() => !p2(w2), [w2]), x2 = (0, import_react.useMemo)(() => !g2(w2), [w2]), A2 = (0, import_react.useMemo)(() => !h2(w2) && N2 && null === f2, [w2]), T2 = (e5) => {
    d && (E2(e5), setTimeout(() => E2(null), y2)), console.warn("Error", e5);
  }, R2 = (0, import_react.useCallback)((e5, t5) => {
    T2(e5.message), l2 && l2({ currentData: w2.fullData, errorValue: t5, currentValue: n3, name: C2, path: D2, error: e5 });
  }, [l2, d]), K2 = f2 === O2, P2 = f2 === `key_${O2}`, V2 = "number" == typeof D2.slice(-1)[0];
  return { pathString: O2, nodeData: w2, path: D2, name: C2, size: k2, canEdit: S2, canDelete: N2, canAdd: x2, canDrag: A2, error: v2, showError: T2, onError: R2, setError: E2, handleEditKey: (e5) => {
    if (b2(null), C2 === e5) return;
    if (!o3) return;
    const t5 = D2.slice(0, -1);
    if (Object.keys(o3).includes(e5)) return void R2({ code: "KEY_EXISTS", message: m2("ERROR_KEY_EXISTS", w2) }, e5);
    const n4 = Object.fromEntries(Object.entries(o3).map(([t6, n5]) => t6 === C2 ? [e5, n5] : [t6, n5]));
    a3(n4, t5).then((t6) => {
      t6 && R2({ code: "UPDATE_ERROR", message: t6 }, e5);
    });
  }, derivedValues: { isEditing: K2, isEditingKey: P2, isArray: V2, canEditKey: null !== o3 && S2 && x2 && N2 && !V2 } };
};
var se = ({ canDrag: e4, canDragOnto: n3, path: r4, nodeData: o3, onMove: a3, onError: l2, translate: c2 }) => {
  const { getStyles: d } = R(), { dragSource: u, setDragSource: p2 } = M(), [g2, h2] = (0, import_react.useState)(false), m2 = j(r4), y2 = (0, import_react.useMemo)(() => e4 ? { onDragStart: (e5) => {
    e5.stopPropagation(), p2({ path: r4, pathString: m2 });
  }, onDragEnd: (e5) => {
    e5.stopPropagation(), p2({ path: null, pathString: null });
  } } : {}, [e4]), f2 = (0, import_react.useMemo)(() => (e5) => n3 ? { onDragOver: (e6) => {
    e6.stopPropagation(), e6.preventDefault();
  }, onDrop: (t4) => {
    t4.stopPropagation(), v2(e5), p2({ path: null, pathString: null }), h2(false);
  }, onDragEnter: (t4) => {
    var n4;
    t4.stopPropagation(), m2.startsWith(null !== (n4 = u.pathString) && void 0 !== n4 ? n4 : "") || h2(e5);
  }, onDragExit: (e6) => {
    e6.stopPropagation(), h2(false);
  } } : {}, [u, n3]), b2 = (0, import_react.useMemo)(() => n3 && null !== u.pathString ? (0, import_jsx_runtime.jsx)("div", Object.assign({ className: "jer-drop-target-bottom", style: { height: "50%", position: "absolute", width: "100%", top: "50%", zIndex: r4.length } }, f2("below"))) : null, [u, n3]), v2 = (e5) => {
    var t4, n4;
    const i3 = null === (t4 = u.path) || void 0 === t4 ? void 0 : t4.slice(-1)[0], s3 = null === (n4 = u.path) || void 0 === n4 ? void 0 : n4.slice(0, -1).join("."), d2 = r4.slice(0, -1).join(""), { parentData: p3 } = o3;
    "string" == typeof i3 && p3 && !Array.isArray(p3) && Object.keys(p3).includes(i3) && i3 in p3 && s3 !== d2 ? l2({ code: "KEY_EXISTS", message: c2("ERROR_KEY_EXISTS", o3) }, i3) : a3(u.path, r4, e5).then((e6) => {
      e6 && l2({ code: "UPDATE_ERROR", message: e6 }, o3.value);
    });
  };
  return { dragSourceProps: y2, getDropTargetProps: f2, BottomDropTarget: b2, DropTargetPadding: ({ position: e5, nodeData: n4 }) => g2 === e5 ? (0, import_jsx_runtime.jsx)("div", { className: "jer-drag-n-drop-padding", style: d("dropZone", n4) }) : null, handleDrop: v2 };
};
var ce = (e4, t4, n3) => {
  var r4, o3, i3;
  const a3 = parseInt(null !== (r4 = getComputedStyle(n3.current).getPropertyValue("line-height")) && void 0 !== r4 ? r4 : "16px"), l2 = (null !== (i3 = null === (o3 = t4.current) || void 0 === o3 ? void 0 : o3.offsetWidth) && void 0 !== i3 ? i3 : 0) / (0.5 * a3), s3 = JSON.stringify(e4, null, 2).replace(/\\n/g, "\n").split("\n").map((e5) => Math.ceil(e5.length / l2)).reduce((e5, t5) => e5 + t5, 0) * a3;
  return Math.min(s3 + 30, window.innerHeight - 50);
};
var de = ({ isEditingKey: n3, canEditKey: r4, pathString: o3, path: i3, name: a3, handleKeyboard: l2, handleEditKey: s3, handleCancel: c2, handleClick: d, keyValueArray: u, styles: p2, getNextOrPrevious: g2 }) => {
  const { setCurrentlyEditingElement: h2 } = M();
  return n3 ? (0, import_jsx_runtime.jsx)("input", { className: "jer-input-text jer-key-edit", type: "text", name: o3, defaultValue: a3, autoFocus: true, onFocus: (e4) => e4.target.select(), onKeyDown: (e4) => l2(e4, { stringConfirm: () => s3(e4.target.value), cancel: c2, tabForward: () => {
    if (s3(e4.target.value), u) {
      const e5 = null == u ? void 0 : u[0][0];
      h2(e5 ? [...i3, e5] : g2("next"));
    } else h2(i3);
  }, tabBack: () => {
    s3(e4.target.value), h2(g2("prev"));
  } }), style: { width: String(a3).length / 1.5 + 0.5 + "em" } }) : (0, import_jsx_runtime.jsxs)("span", { className: "jer-key-text", style: Object.assign(Object.assign({}, p2), { minWidth: `${Math.min(String(a3).length + 1, 5)}ch`, flexShrink: a3.length > 10 ? 1 : 0 }), onDoubleClick: () => r4 && h2(i3, "key"), onClick: d, children: ["" === a3 ? (0, import_jsx_runtime.jsx)("span", { className: i3.length > 0 ? "jer-empty-string" : void 0 }) : `${a3}`, (0, import_jsx_runtime.jsx)("span", { className: "jer-key-colon", children: ":" })] });
};
var ue = (n3) => {
  const { data: r4, parentData: o3, onEdit: a3, onDelete: d, onChange: u, onMove: p2, enableClipboard: g2, canDragOnto: h2, restrictTypeSelection: m2, searchFilter: f2, searchText: b2, showLabel: v2, stringTruncate: j2, showStringQuotes: E2, indent: w2, translate: D2, customNodeDefinitions: C2, handleKeyboard: O2, keyboardControls: S2, sort: N2, editConfirmRef: x2 } = n3, { getStyles: A2 } = R(), { setCurrentlyEditingElement: T2, setCollapseState: K2, previouslyEditedElement: P2, setPreviouslyEditedElement: V2, tabDirection: z2, setTabDirection: _2, previousValue: F2, setPreviousValue: L2 } = M(), [B2, W2] = (0, import_react.useState)("function" == typeof r4 ? I : r4), { pathString: G2, nodeData: Y2, path: H2, name: U2, canEdit: $2, canDelete: J2, canDrag: Z2, error: X2, onError: Q2, handleEditKey: q2, derivedValues: ee2 } = le({ props: n3 }), { dragSourceProps: te2, getDropTargetProps: oe2, BottomDropTarget: ce2, DropTargetPadding: ue2 } = se({ canDrag: Z2, canDragOnto: h2, path: H2, nodeData: Y2, onMove: p2, onError: Q2, translate: D2 }), me2 = ae(C2, Y2), [ye2, fe2] = (0, import_react.useState)(pe(r4, me2)), be2 = (0, import_react.useCallback)((e4) => {
    if (!u) return void W2(e4);
    const t4 = u({ currentData: Y2.fullData, newValue: e4, currentValue: B2, name: U2, path: H2 });
    W2(t4);
  }, [u]);
  (0, import_react.useEffect)(() => {
    W2("function" == typeof r4 ? I : r4), fe2(pe(r4, me2));
  }, [r4, X2]);
  const { CustomNode: ve2, customNodeProps: je2, hideKey: Ee2, showEditTools: we2 = true, showOnEdit: De2, showOnView: Ce2, passOriginalNode: ke2 } = me2, Oe2 = [...ie, ...C2.filter(({ showInTypesSelector: e4 = false, name: t4 }) => e4 && !!t4).map(({ name: e4 }) => e4)], Se2 = (0, import_react.useMemo)(() => {
    if ("boolean" == typeof m2) return m2 ? [] : Oe2;
    if (Array.isArray(m2)) return m2;
    const e4 = m2(Y2);
    return "boolean" == typeof e4 ? e4 ? [] : Oe2 : e4;
  }, [Y2, m2]), [Ne2, xe2] = (0, import_react.useState)(((e4, t4) => {
    var n4;
    if ("string" != typeof e4) return null;
    const r5 = t4.filter((t5) => t5 instanceof Object && t5.enum && t5.values.includes(e4) && t5.matchPriority);
    return r5.sort((e5, t5) => {
      var n5, r6;
      return (null !== (n5 = t5.matchPriority) && void 0 !== n5 ? n5 : 0) - (null !== (r6 = e5.matchPriority) && void 0 !== r6 ? r6 : 0);
    }), null !== (n4 = r5[0]) && void 0 !== n4 ? n4 : null;
  })(B2, Se2)), { isEditing: Ae2 } = ee2, Te2 = y("value", Y2, f2, b2);
  if (Ae2 && (!Te2 || !$2)) {
    const e4 = k(Y2.fullData, H2, z2, N2);
    T2(e4 || P2);
  }
  if (!Te2) return null;
  const Re2 = () => {
    let e4;
    switch (T2(null), L2(null), ye2) {
      case "object":
        e4 = { [D2("DEFAULT_NEW_KEY", Y2)]: B2 };
        break;
      case "array":
        e4 = null != B2 ? B2 : [];
        break;
      case "number": {
        const t4 = Number(B2);
        e4 = isNaN(t4) ? 0 : t4;
        break;
      }
      default:
        e4 = B2;
    }
    a3(e4, H2).then((t4) => {
      t4 && Q2({ code: "UPDATE_ERROR", message: t4 }, e4);
    });
  }, Ke2 = () => {
    T2(null), null === F2 ? (W2(r4), L2(null)) : a3(F2, H2);
  }, { isEditingKey: Pe, canEditKey: Ve } = ee2, ze = !Ae2 && X2, _e = Ae2 && Se2.length > 1, Fe = "invalid" !== ye2 && !X2 && we2, Me = v2 && !Ee2, Le = ve2 && (Ae2 && De2 || !Ae2 && Ce2), Ie = { value: B2, parentData: o3, setValue: be2, isEditing: Ae2, canEdit: $2, setIsEditing: $2 ? () => T2(H2) : () => {
  }, handleEdit: Re2, handleCancel: Ke2, path: H2, stringTruncate: j2, showStringQuotes: E2, nodeData: Y2, enumType: Ne2, translate: D2, handleKeyboard: O2, keyboardCommon: { cancel: Ke2, tabForward: () => {
    _2("next"), V2(G2);
    const e4 = k(Y2.fullData, H2, "next", N2);
    e4 && (Re2(), T2(e4));
  }, tabBack: () => {
    _2("prev"), V2(G2);
    const e4 = k(Y2.fullData, H2, "prev", N2);
    e4 && (Re2(), T2(e4));
  } } }, Be = { canEditKey: Ve, isEditingKey: Pe, pathString: G2, path: H2, name: U2, handleKeyboard: O2, handleEditKey: q2, handleCancel: Ke2, styles: A2("property", Y2), getNextOrPrevious: (e4) => k(Y2.fullData, H2, e4, N2) }, We = Le ? (0, import_jsx_runtime.jsx)(ve2, Object.assign({}, n3, { value: B2, customNodeProps: je2, setValue: be2, handleEdit: Re2, handleCancel: Ke2, handleKeyPress: (e4) => O2(e4, { stringConfirm: Re2, cancel: Ke2 }), isEditing: Ae2, setIsEditing: () => T2(H2), getStyles: A2, originalNode: ke2 ? ge(r4, Ie) : void 0, originalNodeKey: ke2 ? (0, import_jsx_runtime.jsx)(de, Object.assign({}, Be)) : void 0 })) : ge(r4, Ie);
  return (0, import_jsx_runtime.jsxs)("div", Object.assign({ className: "jer-component jer-value-component", style: { marginLeft: w2 / 2 + "em", position: "relative" }, draggable: Z2 }, te2, oe2("above"), { children: [ce2, (0, import_jsx_runtime.jsx)(ue2, { position: "above", nodeData: Y2 }), (0, import_jsx_runtime.jsxs)("div", { className: "jer-value-main-row", style: { flexWrap: U2.length > 10 ? "wrap" : "nowrap" }, children: [Me && (0, import_jsx_runtime.jsx)(de, Object.assign({}, Be)), (0, import_jsx_runtime.jsxs)("div", { className: "jer-value-and-buttons", children: [(0, import_jsx_runtime.jsx)("div", { className: "jer-input-component", children: We }), Ae2 ? (0, import_jsx_runtime.jsx)(re, { onOk: Re2, onCancel: Ke2, nodeData: Y2, editConfirmRef: x2 }) : Fe && (0, import_jsx_runtime.jsx)(ne, { startEdit: $2 ? () => {
    L2(B2), T2(H2, Ke2);
  } : void 0, handleDelete: J2 ? () => {
    d(B2, H2).then((e4) => {
      e4 && Q2({ code: "DELETE_ERROR", message: e4 }, B2);
    });
  } : void 0, enableClipboard: g2, translate: D2, customButtons: n3.customButtons, nodeData: Y2, handleKeyboard: O2, keyboardControls: S2, editConfirmRef: x2 }), _e && (0, import_jsx_runtime.jsxs)("div", { className: "jer-select jer-select-types", children: [(0, import_jsx_runtime.jsx)("select", { name: `${U2}-type-select`, className: "jer-select-inner", onChange: (e4) => ((e5) => {
    const t4 = C2.find((t5) => t5.name === e5);
    if (t4) return a3(t4.defaultValue, H2), fe2(e5), xe2(null), T2(null), void K2({ path: H2, collapsed: false, includeChildren: false });
    const n4 = Se2.find((t5) => t5 instanceof Object && t5.enum === e5);
    if (n4) return "string" == typeof B2 && n4.values.includes(B2) || a3(n4.values[0], H2).then((e6) => {
      e6 && (Q2({ code: "UPDATE_ERROR", message: e6 }, r5), T2(null));
    }), void xe2(n4);
    const r5 = he(B2, e5, D2("DEFAULT_NEW_KEY", Y2), (null == me2 ? void 0 : me2.CustomNode) ? D2("DEFAULT_STRING", Y2) : void 0);
    a3(r5, H2).then((e6) => {
      e6 ? (Q2({ code: "UPDATE_ERROR", message: e6 }, r5), T2(null)) : xe2(null);
    });
  })(e4.target.value), value: Ne2 ? Ne2.enum : ye2, children: Se2.map((e4) => e4 instanceof Object && "enum" in e4 ? (0, import_jsx_runtime.jsx)("option", { value: e4.enum, children: e4.enum }, e4.enum) : (0, import_jsx_runtime.jsx)("option", { value: e4, children: e4 }, e4)) }), (0, import_jsx_runtime.jsx)("span", { className: "focus" })] }), ze && (0, import_jsx_runtime.jsx)("span", { className: "jer-error-slug", style: A2("error", Y2), children: X2 })] })] }), (0, import_jsx_runtime.jsx)(ue2, { position: "below", nodeData: Y2 })] }));
};
var pe = (e4, t4) => (null == t4 ? void 0 : t4.CustomNode) && (null == t4 ? void 0 : t4.name) && t4.showInTypesSelector ? t4.name : "string" == typeof e4 ? "string" : "number" == typeof e4 ? "number" : "boolean" == typeof e4 ? "boolean" : null === e4 ? "null" : "invalid";
var ge = (e4, n3) => {
  const r4 = pe(e4), { value: o3 } = n3;
  switch (r4) {
    case "string":
      return (0, import_jsx_runtime.jsx)(W, Object.assign({}, n3, { value: o3 }));
    case "number":
      return (0, import_jsx_runtime.jsx)(G, Object.assign({}, n3, { value: o3 }));
    case "boolean":
      return (0, import_jsx_runtime.jsx)(Y, Object.assign({}, n3, { value: o3 }));
    case "null":
      return (0, import_jsx_runtime.jsx)(H, Object.assign({}, n3));
    default:
      return (0, import_jsx_runtime.jsx)(U, Object.assign({}, n3));
  }
};
var he = (e4, t4, n3, r4) => {
  switch (t4) {
    case "string":
      return null != r4 ? r4 : String(e4);
    case "number": {
      const t5 = Number(e4);
      return isNaN(t5) ? 0 : t5;
    }
    case "boolean":
      return !!e4;
    case "null":
      return null;
    case "object":
      return { [n3]: e4 };
    case "array":
      return [e4];
    default:
      return String(e4);
  }
};
var me = (r4) => {
  const { getStyles: o3 } = R(), { collapseState: d, setCollapseState: u, getMatchingCollapseState: p2, currentlyEditingElement: f2, setCurrentlyEditingElement: b2, areChildrenBeingEdited: v2, previousValue: j2, setPreviousValue: w2 } = M(), { mainContainerRef: D2, data: C2, nodeData: O2, parentData: S2, showCollectionCount: x2, onEdit: A2, onAdd: T2, onDelete: K2, canDragOnto: P2, collapseFilter: V2, collapseAnimationTime: z2, onMove: _2, enableClipboard: F2, searchFilter: L2, searchText: I2, indent: B2, sort: W2, showArrayIndices: G2, defaultValue: Y2, newKeyOptions: H2, translate: U2, customNodeDefinitions: $2, jsonParse: J2, jsonStringify: Z2, TextEditor: X2, keyboardControls: Q2, handleKeyboard: q2, insertAtTop: ee2, onCollapse: oe2, editConfirmRef: ie2, collapseClickZones: pe2 } = r4, [ge2, he2] = (0, import_react.useState)(Z2(C2)), ye2 = V2(O2), { contentRef: fe2, isAnimating: be2, maxHeight: ve2, collapsed: je2, animateCollapse: Ee2, cssTransitionValue: we2 } = ((e4, t4, n3, r5) => {
    const [o4, l2] = (0, import_react.useState)(n3 ? 0 : void 0), [s3, c2] = (0, import_react.useState)(n3), d2 = (0, import_react.useRef)(false), u2 = (0, import_react.useRef)(null), p3 = (0, import_react.useRef)(0), g2 = (0, import_react.useRef)(), h2 = t4 / 1e3 + "s";
    return { contentRef: u2, isAnimating: d2.current, animateCollapse: (n4) => {
      var o5, i3;
      if (s3 !== n4) {
        switch (window.clearTimeout(g2.current), d2.current = true, n4) {
          case true: {
            const e5 = null !== (i3 = null === (o5 = u2.current) || void 0 === o5 ? void 0 : o5.offsetHeight) && void 0 !== i3 ? i3 : 0;
            p3.current = e5, l2(e5), setTimeout(() => {
              l2(0);
            }, 5);
            break;
          }
          case false:
            l2(p3.current || ce(e4, u2, r5));
        }
        c2(!s3), g2.current = window.setTimeout(() => {
          d2.current = false, n4 || l2(void 0);
        }, t4);
      }
    }, maxHeight: o4, collapsed: s3, cssTransitionValue: h2 };
  })(C2, z2, ye2, D2), { pathString: De2, nodeData: Ce2, path: ke2, name: Oe2, size: Se2, canEdit: Ne2, canDelete: xe2, canAdd: Ae2, canDrag: Te2, error: Re2, setError: Ke2, onError: Pe, handleEditKey: Ve, derivedValues: ze } = le({ props: r4, collapsed: je2 }), { dragSourceProps: _e, getDropTargetProps: Fe, BottomDropTarget: Me, DropTargetPadding: Le } = se({ canDrag: Te2, canDragOnto: P2, path: ke2, nodeData: Ce2, onMove: _2, onError: Pe, translate: U2 }), Ie = (0, import_react.useRef)(!ye2), { isEditing: Be, isEditingKey: We, isArray: Ge, canEditKey: Ye } = ze;
  (0, import_react.useEffect)(() => {
    he2(Z2(C2));
  }, [C2]), (0, import_react.useEffect)(() => {
    const e4 = V2(Ce2) && !Be;
    Ie.current = !e4, Ee2(e4);
  }, [V2]), (0, import_react.useEffect)(() => {
    if (null !== d) {
      const e4 = p2(ke2);
      e4 && (Ie.current = true, Ee2(e4.collapsed));
    }
  }, [d]);
  const He = (0, import_react.useRef)(null), Ue = (0, import_react.useCallback)((e4, t4) => {
    if ("function" != typeof Y2) return Y2;
    const n3 = Y2(e4, t4);
    return void 0 !== n3 ? n3 : null;
  }, [Y2]), $e = (0, import_react.useCallback)((e4) => H2 ? "function" != typeof H2 ? H2 : H2(e4) : null, [H2]), { CustomNode: Je, customNodeProps: Ze, CustomWrapper: Xe, wrapperProps: Qe = {}, hideKey: qe, showEditTools: et = true, showOnEdit: tt, showOnView: nt, showCollectionWrapper: rt = true } = (0, import_react.useMemo)(() => ae($2, Ce2), [C2]), ot = v2(De2);
  ot && je2 && Ee2(false);
  if (!(y("collection", Ce2, L2, I2) || 0 === Ce2.level) && !ot) return null;
  const it = Array.isArray(C2) ? "array" : "object", at = "array" === it ? { open: "[", close: "]" } : { open: "{", close: "}" }, lt = (e4) => {
    if ("Tab" !== e4.key || e4.getModifierState("Shift")) q2(e4, { objectConfirm: ct, cancel: ut });
    else {
      e4.preventDefault();
      const t4 = N(He, "	");
      he2(t4);
    }
  }, st = (e4) => {
    e4.stopPropagation();
    const t4 = E(e4);
    if (t4 && Q2.collapseModifier.includes(t4)) return Ie.current = true, void u({ collapsed: !je2, path: ke2, includeChildren: true });
    f2 && f2.includes(De2) || (Ie.current = true, u(null), oe2 && oe2({ path: ke2, collapsed: !je2, includeChildren: false }), Ee2(!je2));
  }, ct = () => {
    try {
      const e4 = J2(ge2);
      if (b2(null), w2(null), Ke2(null), JSON.stringify(e4) === JSON.stringify(C2)) return;
      A2(e4, ke2).then((t4) => {
        t4 && Pe({ code: "UPDATE_ERROR", message: t4 }, e4);
      });
    } catch (e4) {
      Pe({ code: "INVALID_JSON", message: U2("ERROR_INVALID_JSON", Ce2) }, ge2);
    }
  }, dt = ke2.length > 0 ? () => {
    K2(C2, ke2).then((e4) => {
      e4 && Pe({ code: "DELETE_ERROR", message: e4 }, C2);
    });
  } : void 0, ut = () => {
    b2(null), null === j2 ? (Ke2(null), he2(Z2(C2)), w2(null)) : A2(j2, ke2);
  }, pt = "when-closed" === x2 ? je2 : x2, gt = !Be && et, ht = (G2 || !Ge) && !qe && void 0 !== Oe2, mt = Je && (Be && tt || !Be && nt), yt = Object.entries(C2).map(([e4, t4]) => ["array" === it ? Number(e4) : e4, t4]);
  "object" === it && W2(yt, (e4) => e4);
  const ft = Ie.current ? Be ? (0, import_jsx_runtime.jsxs)("div", { className: "jer-collection-text-edit", children: [X2 ? (0, import_jsx_runtime.jsx)(X2, { value: ge2, onChange: he2, onKeyDown: (e4) => q2(e4, { objectConfirm: ct, cancel: ut }) }) : (0, import_jsx_runtime.jsx)(h, { textAreaRef: He, className: "jer-collection-text-area", name: De2, value: ge2, setValue: he2, isEditing: Be, handleKeyPress: lt, styles: o3("input", Ce2) }), (0, import_jsx_runtime.jsx)("div", { className: "jer-collection-input-button-row", children: (0, import_jsx_runtime.jsx)(re, { onOk: ct, onCancel: ut, nodeData: Ce2, editConfirmRef: ie2 }) })] }) : yt.map(([e4, n3], i3) => {
    const a3 = { key: e4, value: n3, path: [...ke2, e4], level: ke2.length + 1, index: i3, size: m(n3) ? Object.keys(n3).length : 1, parentData: C2, fullData: Ce2.fullData };
    return (0, import_jsx_runtime.jsx)("div", { className: "jer-collection-element", style: o3("collectionElement", a3), children: m(n3) ? (0, import_jsx_runtime.jsx)(me, Object.assign({}, r4, { data: n3, parentData: C2, nodeData: a3, showCollectionCount: x2, canDragOnto: Ne2 }), e4) : (0, import_jsx_runtime.jsx)(ue, Object.assign({}, r4, { data: n3, parentData: C2, nodeData: a3, canDragOnto: Ne2, showLabel: "object" === it || G2 }), e4) }, e4);
  }) : null, bt = !!rt && (je2 && !ot);
  bt || (Ie.current = true);
  const vt = Object.assign(Object.assign({}, r4), { data: C2, value: C2, parentData: S2, nodeData: Ce2, setValue: (e4) => g(void 0, void 0, void 0, function* () {
    return yield A2(e4, ke2);
  }), handleEdit: ct, handleCancel: ut, handleKeyPress: lt, isEditing: Be, setIsEditing: () => b2(ke2), getStyles: o3, canDragOnto: Ne2 }), jt = mt ? (0, import_jsx_runtime.jsx)(Je, Object.assign({ customNodeProps: Ze }, vt, { children: ft })) : ft, Et = gt && (0, import_jsx_runtime.jsx)(ne, { startEdit: Ne2 ? () => {
    Ie.current = true, w2(null), b2(ke2);
  } : void 0, handleAdd: Ae2 ? (e4) => {
    Ee2(false);
    const t4 = Ue(Ce2, e4);
    if ("array" === it) {
      const e5 = ee2.array ? 0 : C2.length, n3 = ee2.array ? { insert: true } : {};
      T2(t4, [...ke2, e5], n3).then((e6) => {
        e6 && Pe({ code: "ADD_ERROR", message: e6 }, t4);
      });
    } else if (e4 in C2) Pe({ code: "KEY_EXISTS", message: U2("ERROR_KEY_EXISTS", Ce2) }, e4);
    else {
      const n3 = ee2.object ? { insertBefore: 0 } : {};
      T2(t4, [...ke2, e4], n3).then((e5) => {
        e5 && Pe({ code: "ADD_ERROR", message: e5 }, t4);
      });
    }
  } : void 0, handleDelete: xe2 ? dt : void 0, enableClipboard: F2, type: it, nodeData: Ce2, translate: U2, customButtons: r4.customButtons, keyboardControls: Q2, handleKeyboard: q2, getNewKeyOptions: $e, editConfirmRef: ie2 }), wt = { canEditKey: Ye, isEditingKey: We, pathString: De2, path: ke2, name: Oe2, handleKeyboard: q2, handleEditKey: Ve, handleCancel: ut, keyValueArray: yt, styles: o3("property", Ce2), getNextOrPrevious: (e4) => k(Ce2.fullData, ke2, e4, W2), handleClick: pe2.includes("property") ? st : (e4) => e4.stopPropagation() }, Dt = (0, import_jsx_runtime.jsxs)("div", Object.assign({ className: "jer-component jer-collection-component", style: Object.assign(Object.assign({ marginLeft: (0 === ke2.length ? 0 : B2 / 2) + "em" }, o3("collection", Ce2)), { position: "relative" }), draggable: Te2 }, _e, Fe("above"), { children: [(0, import_jsx_runtime.jsx)("div", { className: "jer-clickzone", style: { width: B2 / 2 + 1 + "em", zIndex: 10 + 2 * Ce2.level }, onClick: pe2.includes("left") ? st : void 0 }), !Be && Me, (0, import_jsx_runtime.jsx)(Le, { position: "above", nodeData: Ce2 }), rt ? (0, import_jsx_runtime.jsxs)("div", { className: "jer-collection-header-row", style: { position: "relative" }, onClick: pe2.includes("header") ? st : void 0, children: [(0, import_jsx_runtime.jsxs)("div", { className: "jer-collection-name", children: [(0, import_jsx_runtime.jsx)("div", { className: "jer-collapse-icon jer-accordion-icon" + (je2 ? " jer-rotate-90" : ""), style: { zIndex: 11 + 2 * Ce2.level, transition: we2 }, onClick: st, children: (0, import_jsx_runtime.jsx)(te, { name: "chevron", rotate: je2, nodeData: Ce2 }) }), ht && (0, import_jsx_runtime.jsx)(de, Object.assign({}, wt)), !Be && (0, import_jsx_runtime.jsx)("span", { className: "jer-brackets jer-bracket-open", style: o3("bracket", Ce2), children: at.open })] }), !Be && pt && (0, import_jsx_runtime.jsx)("div", { className: "jer-collection-item-count" + (pt ? " jer-visible" : " jer-hidden"), style: Object.assign(Object.assign({}, o3("itemCount", Ce2)), { transition: we2 }), children: 1 === Se2 ? U2("ITEM_SINGLE", Object.assign(Object.assign({}, Ce2), { size: 1 }), 1) : U2("ITEMS_MULTIPLE", Ce2, Se2) }), (0, import_jsx_runtime.jsx)("div", { className: "jer-brackets" + (bt ? " jer-visible" : " jer-hidden"), style: Object.assign(Object.assign({}, o3("bracket", Ce2)), { transition: we2 }), children: at.close }), Et] }) : qe ? (0, import_jsx_runtime.jsx)(import_jsx_runtime.Fragment, {}) : (0, import_jsx_runtime.jsxs)("div", { className: "jer-collection-header-row", style: { position: "relative" }, children: [(0, import_jsx_runtime.jsx)(de, Object.assign({}, wt)), Et] }), (0, import_jsx_runtime.jsxs)("div", { className: "jer-collection-inner", style: Object.assign(Object.assign({ overflowY: bt || be2 ? "clip" : "visible", maxHeight: ot ? void 0 : ve2 }, o3("collectionInner", Ce2)), { transition: we2 }), ref: fe2, children: [jt, (0, import_jsx_runtime.jsx)("div", { className: Be ? "jer-collection-error-row" : "jer-collection-error-row-edit", children: Re2 && (0, import_jsx_runtime.jsx)("span", { className: "jer-error-slug", style: o3("error", Ce2), children: Re2 }) }), !Be && rt && (0, import_jsx_runtime.jsx)("div", { className: "jer-brackets jer-bracket-outside", style: Object.assign(Object.assign({}, o3("bracket", Ce2)), { marginLeft: (B2 < 3 ? -1 : B2 < 6 ? -0.5 : 0) + "em" }), children: at.close })] }), (0, import_jsx_runtime.jsx)(Le, { position: "below", nodeData: Ce2 })] }));
  return Xe ? (0, import_jsx_runtime.jsx)(Xe, Object.assign({ customNodeProps: Qe }, vt, { children: Dt })) : Dt;
};
var ye = { ITEM_SINGLE: "{{count}} item", ITEMS_MULTIPLE: "{{count}} items", KEY_NEW: "Enter new key", KEY_SELECT: "Select key", NO_KEY_OPTIONS: "No key options", ERROR_KEY_EXISTS: "Key already exists", ERROR_INVALID_JSON: "Invalid JSON", ERROR_UPDATE: "Update unsuccessful", ERROR_DELETE: "Delete unsuccessful", ERROR_ADD: "Adding node unsuccessful", DEFAULT_STRING: "New data!", DEFAULT_NEW_KEY: "key", SHOW_LESS: "(Show less)" };
var fe = (e4, t4) => (n3, r4, o3) => ((e5, t5, n4, r5, o4) => {
  if (t5[r5]) {
    const e6 = t5[r5](n4);
    if (null !== e6) return e6;
  }
  const i3 = r5 in e5 ? e5[r5] : ye[r5];
  return void 0 === o4 ? i3 : null == i3 ? void 0 : i3.replace("{{count}}", String(o4));
})(e4, t4, r4, n3, o3);
var be = [];
var ve = [];
!function(e4, t4) {
  if (e4 && "undefined" != typeof document) {
    var n3, r4 = true === t4.prepend ? "prepend" : "append", o3 = true === t4.singleTag, i3 = "string" == typeof t4.container ? document.querySelector(t4.container) : document.getElementsByTagName("head")[0];
    if (o3) {
      var a3 = be.indexOf(i3);
      -1 === a3 && (a3 = be.push(i3) - 1, ve[a3] = {}), n3 = ve[a3] && ve[a3][r4] ? ve[a3][r4] : ve[a3][r4] = l2();
    } else n3 = l2();
    65279 === e4.charCodeAt(0) && (e4 = e4.substring(1)), n3.styleSheet ? n3.styleSheet.cssText += e4 : n3.appendChild(document.createTextNode(e4));
  }
  function l2() {
    var e5 = document.createElement("style");
    if (e5.setAttribute("type", "text/css"), t4.attributes) for (var n4 = Object.keys(t4.attributes), o4 = 0; o4 < n4.length; o4++) e5.setAttribute(n4[o4], t4.attributes[n4[o4]]);
    var a4 = "prepend" === r4 ? "afterbegin" : "beforeend";
    return i3.insertAdjacentElement(a4, e5), e5;
  }
}(':root{--jer-select-border:#b6b6b6;--jer-select-focus:#777;--jer-select-arrow:#777;--jer-form-border:1px solid #ededf0;--jer-form-border-focus:1px solid #e2e2e2;--jer-highlight-color:#b3d8ff}.jer-visible{opacity:1}.jer-hidden{opacity:0}.jer-select select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#000;cursor:inherit;font-family:inherit;font-size:.8em;line-height:inherit;margin:0;outline:none;padding:0 1em 0 0;z-index:1}select::-ms-expand{display:none}.jer-select{align-items:center;background-color:#fff;background-image:linear-gradient(0deg,#f9f9f9,#fff 33%);border:1px solid var(--jer-select-border);border-radius:.25em;cursor:pointer;display:grid;grid-template-areas:"select";line-height:1.1;max-width:15ch;min-width:12ch;padding:.25em .5em;position:relative}.jer-select select,.jer-select:after{grid-area:select}.jer-select:not(.jer-select--multiple):after{background-color:var(--jer-select-arrow);clip-path:polygon(100% 0,0 0,50% 100%);content:"";height:.5em;justify-self:end;width:.8em}select:focus+.focus{border:1px solid var(--jer-select-focus);border-radius:inherit;bottom:-1px;left:-1px;position:absolute;right:-1px;top:-1px}.jer-select-inner{text-overflow:ellipsis;width:100%}.jer-editor-container{border-radius:.5em;font-size:16px;line-height:1;padding:1em 1em 1em 2em;position:relative;text-align:left}.jer-editor-container textarea{border:var(--jer-form-border);border-radius:.3em;color:var(--jer-input-color);outline:none}.jer-editor-container textarea:focus{border:var(--jer-form-border-focus)}.jer-editor-container input{border:var(--jer-form-border);border-radius:.3em;font-family:inherit;outline:none}.jer-editor-container input:focus{border:var(--jer-form-border-focus)}.jer-editor-container ::selection{background-color:var(--jer-highlight-color)}.jer-collection-header-row,.jer-value-main-row{align-items:center;display:flex;gap:.3em;min-height:1.7em}.jer-collection-header-row{display:flex;flex-wrap:wrap}.jer-collapse-icon{left:-1.2em;position:absolute;top:.35em}.jer-collection-inner{position:relative}.jer-collection-text-edit{align-items:flex-start;display:flex;flex-direction:column;gap:.3em;line-height:1.1em}.jer-collection-text-area{font-family:inherit;font-size:.85em;max-height:40em;overflow:hidden;padding:.2em .5em 0;resize:both}.jer-collection-input-button-row{display:flex;font-size:150%;justify-content:flex-end;margin-top:.4em;width:100%}.jer-collection-error-row{bottom:.5em;position:absolute}.jer-error-slug{margin-left:1em}.jer-value-component{position:relative}.jer-value-main-row{display:flex;gap:0}.jer-value-and-buttons{align-items:center;display:flex;justify-content:flex-start;padding-left:.5em}.jer-value-error-row{position:absolute}.jer-value-string{line-height:1.3em;overflow-wrap:anywhere;white-space:pre-wrap;word-break:break-word}.jer-string-expansion{cursor:pointer;filter:saturate(50%);opacity:.6}.jer-show-less{font-size:80%}.jer-hyperlink{text-decoration:underline}.jer-input-text{font-family:inherit;font-size:.9em;height:1.4em;line-height:1.2em;margin:0;min-width:6em;overflow:hidden;padding:.25em .5em .2em;resize:none}.jer-input-boolean{margin-left:.3em;margin-right:.3em;transform:scale(1.5)}.jer-key-text{line-height:1.1em;white-space:pre-wrap;word-break:break-word}.jer-key-edit{font-size:inherit;font-size:.9em;padding:0 .3em}.jer-value-invalid{font-style:italic;opacity:.5}.jer-input-number{font-size:90%;min-width:3em}.jer-confirm-buttons,.jer-edit-buttons{align-items:center;cursor:pointer;display:flex;height:1em}.jer-input-buttons{gap:.4em}.jer-edit-buttons{gap:.4em;margin-left:.5em;opacity:0}.jer-confirm-buttons{gap:.2em;margin-left:.4em}.jer-edit-buttons:hover{opacity:1;position:relative}.jer-collection-header-row:hover>.jer-edit-buttons,.jer-value-and-buttons:hover>.jer-edit-buttons,.jer-value-main-row:hover>.jer-edit-buttons{opacity:1}.jer-copy-pulse{position:relative;transition:.3s}.jer-copy-pulse:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-copy-pulse:after{border-radius:50%;box-shadow:0 0 15px 5px var(--jer-icon-copy-color);content:"";display:block;height:100%;left:0;opacity:0;position:absolute;top:0;transition:all .5s;width:100%}.jer-copy-pulse:active:after{border-radius:4em;box-shadow:0 0 0 0 var(--jer-icon-copy-color);left:0;opacity:1;position:absolute;top:0;transition:0s}.jer-copy-pulse:active{top:.07em}.jer-rotate-90{transform:rotate(-90deg)}.jer-icon:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-empty-string:after{content:"<empty string>";font-size:90%;font-style:italic}.jer-drag-n-drop-padding{border:1px dashed #e0e0e0;border-radius:.3em;height:.5em}.jer-clickzone{height:calc(100% - .8em);left:-1em;position:absolute;top:1.2em}', {});
var je = ({ data: e4, setData: n3, rootName: r4 = "root", onUpdate: o3 = () => {
}, onEdit: d = o3, onDelete: u = o3, onAdd: p2 = o3, onChange: h2, onError: y2, showErrorMessages: f2 = true, enableClipboard: b2 = true, indent: v2 = 2, collapse: E2 = false, collapseAnimationTime: D2 = 300, showCollectionCount: k2 = true, restrictEdit: O2 = false, restrictDelete: S2 = false, restrictAdd: N2 = false, restrictTypeSelection: x2 = false, restrictDrag: A2 = true, viewOnly: T2, searchFilter: K2, searchText: P2, searchDebounceTime: V2 = 350, keySort: z2 = false, showArrayIndices: _2 = true, showStringQuotes: F2 = true, defaultValue: L2 = null, newKeyOptions: I2, minWidth: B2 = 250, maxWidth: W2 = "min(600px, 90vw)", rootFontSize: G2, stringTruncate: Y2 = 250, translations: H2 = {}, className: U2, id: $2, customText: J2 = {}, customNodeDefinitions: Z2 = [], customButtons: X2 = [], jsonParse: Q2 = JSON.parse, jsonStringify: q2 = (e5) => JSON.stringify(e5, null, 2), TextEditor: ee2, errorMessageTimeout: te2 = 2500, keyboardControls: ne2 = {}, externalTriggers: re2, insertAtTop: oe2 = false, onCollapse: ie2, collapseClickZones: ae2 = ["header", "left"] }) => {
  const { getStyles: le2 } = R(), { setCurrentlyEditingElement: se2 } = M(), ce2 = (0, import_react.useCallback)(De(E2), [E2]), de2 = (0, import_react.useCallback)(fe(H2, J2), [H2, J2]), [pe2, ge2] = (0, import_react.useState)(P2), [he2, ye2] = (({ setData: e5, data: t4 }) => {
    const [n4, r5] = (0, import_react.useState)(e5 ? void 0 : t4), o4 = (0, import_react.useCallback)((t5) => {
      e5 ? e5(t5) : r5(t5);
    }, [e5]);
    return (0, import_react.useEffect)(() => {
      e5 || r5(t4);
    }, [t4]), [e5 ? t4 : n4, o4];
  })({ setData: n3, data: e4 }), be2 = (0, import_react.useRef)(null);
  (0, import_react.useEffect)(() => {
    se2(null);
    const e5 = setTimeout(() => ge2(P2), V2);
    return () => clearTimeout(e5);
  }, [P2, V2]);
  const ve2 = { key: r4, path: [], level: 0, index: 0, value: he2, size: "object" == typeof he2 && null !== he2 ? Object.keys(he2).length : 1, parentData: null, fullData: he2 }, je2 = (e5, t4) => g(void 0, void 0, void 0, function* () {
    const n4 = yield e5(t4);
    if (true === n4 || void 0 === n4) return void ye2(t4.newData);
    const r5 = ke(n4) ? n4 : ["error", n4], [o4, i3] = r5;
    if ("error" === o4) return ye2(t4.currentData), false === i3 ? de2("ERROR_UPDATE", ve2) : String(i3);
    ye2(i3);
  }), Ee2 = (0, import_react.useMemo)(() => De(O2, T2), [O2, T2]), Oe2 = (0, import_react.useMemo)(() => De(S2, T2), [S2, T2]), Se2 = (0, import_react.useMemo)(() => De(N2, T2), [N2, T2]), Ne2 = (0, import_react.useMemo)(() => De(A2, T2), [A2, T2]), xe2 = (0, import_react.useMemo)(() => Ce(K2), [K2]), Ae2 = (0, import_react.useMemo)(() => ((e5) => {
    const t4 = Object.assign({}, C);
    for (const n4 of Object.keys(C)) {
      const r5 = n4;
      if (e5[r5]) {
        const o4 = e5[r5], i3 = ["clipboardModifier", "collapseModifier"].includes(n4) ? Array.isArray(o4) ? o4 : [o4] : "string" == typeof o4 ? { key: o4 } : o4;
        t4[r5] = i3, ["stringConfirm", "numberConfirm", "booleanConfirm"].forEach((n5) => {
          !e5[n5] && e5.confirm && (t4[n5] = t4.confirm);
        });
      }
    }
    return t4;
  })(ne2), [ne2]), Te2 = (0, import_react.useCallback)((e5, t4) => ((e6, t5, n4) => {
    const r5 = Object.entries(t5);
    for (const [t6, o4] of r5) if (w(n4, e6[t6], t6)) {
      n4.preventDefault(), o4();
      break;
    }
  })(Ae2, t4, e5), [ne2]), Re2 = (0, import_react.useRef)(null);
  ((e5, t4) => {
    const { setCurrentlyEditingElement: n4, currentlyEditingElement: r5, setCollapseState: o4 } = M();
    (0, import_react.useEffect)(() => {
      if (!e5) return;
      const { collapse: i3, edit: a3 } = e5;
      i3 && o4(i3);
      const l2 = !(null == a3 ? void 0 : a3.path) || j(a3.path) === r5;
      switch (null == a3 ? void 0 : a3.action) {
        case "accept":
          l2 && (t4.current && t4.current.click(), n4(null));
          break;
        case "cancel":
          l2 && n4(null);
          break;
        default:
          (null == a3 ? void 0 : a3.path) && n4(a3.path);
      }
    }, [e5]);
  })(re2, Re2);
  const Ke2 = (0, import_react.useCallback)((e5, t4) => {
    false !== z2 && ("function" != typeof z2 ? e5.sort((e6, n4) => {
      const r5 = t4(e6)[0], o4 = t4(n4)[0];
      return r5 < o4 ? -1 : r5 > o4 ? 1 : 0;
    }) : e5.sort((e6, n4) => z2(t4(e6), t4(n4))));
  }, [z2]), Pe = { mainContainerRef: be2, name: r4, nodeData: ve2, onEdit: (e5, t4) => g(void 0, void 0, void 0, function* () {
    const { currentData: n4, newData: r5, currentValue: o4, newValue: i3 } = we(he2, t4, e5, "update");
    if (o4 !== i3) return yield je2(d, { currentData: n4, newData: r5, currentValue: o4, newValue: i3, name: t4.slice(-1)[0], path: t4 });
  }), onDelete: (e5, t4) => g(void 0, void 0, void 0, function* () {
    const { currentData: n4, newData: r5, currentValue: o4, newValue: i3 } = we(he2, t4, e5, "delete");
    return yield je2(u, { currentData: n4, newData: r5, currentValue: o4, newValue: i3, name: t4.slice(-1)[0], path: t4 });
  }), onAdd: (e5, t4, n4) => g(void 0, void 0, void 0, function* () {
    const { currentData: r5, newData: o4, currentValue: i3, newValue: a3 } = we(he2, t4, e5, "add", n4);
    return yield je2(p2, { currentData: r5, newData: o4, currentValue: i3, newValue: a3, name: t4.slice(-1)[0], path: t4 });
  }), onChange: h2, onError: y2, showErrorMessages: f2, onMove: (e5, t4, n4) => g(void 0, void 0, void 0, function* () {
    if (null === e5) return;
    const { currentData: r5, newData: o4, currentValue: i3 } = we(he2, e5, "", "delete"), a3 = e5.slice(-1)[0], l2 = t4.slice(0, -1), s3 = t4.slice(-1)[0];
    let c2 = "number" == typeof s3 ? "above" === n4 ? s3 : s3 + 1 : "number" == typeof a3 ? `arr_${a3}` : a3;
    e5.slice(0, -1).join(".") === t4.slice(0, -1).join(".") && "number" == typeof a3 && "number" == typeof c2 && a3 < c2 && (c2 -= 1);
    const u2 = "number" == typeof c2 ? { insert: true } : "above" === n4 ? { insertBefore: s3 } : { insertAfter: s3 }, { newData: p3, newValue: g2 } = we(o4, [...l2, c2], i3, "add", u2);
    return yield je2(d, { currentData: r5, newData: p3, currentValue: i3, newValue: g2, name: t4.slice(-1)[0], path: t4 });
  }), showCollectionCount: k2, collapseFilter: ce2, collapseAnimationTime: D2, restrictEditFilter: Ee2, restrictDeleteFilter: Oe2, restrictAddFilter: Se2, restrictTypeSelection: x2, restrictDragFilter: Ne2, canDragOnto: false, searchFilter: xe2, searchText: pe2, enableClipboard: b2, keySort: z2, sort: Ke2, showArrayIndices: _2, showStringQuotes: F2, indent: v2, defaultValue: L2, newKeyOptions: I2, stringTruncate: Y2, translate: de2, customNodeDefinitions: Z2, customButtons: X2, parentData: null, jsonParse: Q2, jsonStringify: q2, TextEditor: ee2, errorMessageTimeout: te2, handleKeyboard: Te2, keyboardControls: Ae2, insertAtTop: { object: true === oe2 || "object" === oe2, array: true === oe2 || "array" === oe2 }, onCollapse: ie2, editConfirmRef: Re2, collapseClickZones: ae2 }, Ve = Object.assign(Object.assign({}, le2("container", ve2)), { minWidth: B2, maxWidth: W2 });
  return Ve.fontSize = null != G2 ? G2 : Ve.fontSize, (0, import_jsx_runtime.jsx)("div", { id: $2, ref: be2, className: `jer-editor-container ${null != U2 ? U2 : ""}`, style: Ve, children: m(he2) ? (0, import_jsx_runtime.jsx)(me, Object.assign({ data: he2 }, Pe)) : (0, import_jsx_runtime.jsx)(ue, Object.assign({ data: he2, showLabel: true }, Pe)) });
};
var Ee = (e4) => {
  var n3;
  const [r4, o3] = (0, import_react.useState)();
  return (0, import_react.useEffect)(() => {
    const e5 = document.documentElement;
    o3(e5);
  }, []), r4 ? (0, import_jsx_runtime.jsx)(T, { theme: null !== (n3 = e4.theme) && void 0 !== n3 ? n3 : x, icons: e4.icons, docRoot: r4, children: (0, import_jsx_runtime.jsx)(F, { onEditEvent: e4.onEditEvent, onCollapse: e4.onCollapse, children: (0, import_jsx_runtime.jsx)(je, Object.assign({}, e4)) }) }) : null;
};
var we = (e4, t4, n3, r4, o3 = {}) => {
  if (0 === t4.length) return { currentData: e4, newData: n3, currentValue: e4, newValue: n3 };
  const i3 = Object.assign({ remove: "delete" === r4 }, o3), a3 = "add" !== r4 ? r2(e4, t4) : void 0;
  return { currentData: e4, newData: o(e4, t4, n3, i3), currentValue: a3, newValue: "delete" !== r4 ? n3 : void 0 };
};
var De = (e4, t4) => t4 ? () => true : "boolean" == typeof e4 ? () => e4 : "number" == typeof e4 ? ({ level: t5 }) => t5 >= e4 : e4;
var Ce = (e4) => {
  if (void 0 !== e4) return "value" === e4 ? b : "key" === e4 ? v : "all" === e4 ? (e5, t4) => b(e5, t4) || v(e5, t4) : e4;
};
var ke = (e4) => Array.isArray(e4) && 2 === e4.length && ["error", "value"].includes(e4[0]);
var Oe = (e4) => {
  var n3;
  const { value: r4, setIsEditing: o3, getStyles: i3, nodeData: a3 } = e4, l2 = i3("string", a3), { canEdit: s3 } = le({ props: e4 });
  return (0, import_jsx_runtime.jsx)("div", { onDoubleClick: () => o3(true), onClick: (e5) => {
    (e5.getModifierState("Control") || e5.getModifierState("Meta")) && o3(true);
  }, className: "jer-value-string jer-hyperlink", style: l2, children: (0, import_jsx_runtime.jsx)("a", { href: r4, target: "_blank", rel: "noreferrer", style: { color: null !== (n3 = l2.color) && void 0 !== n3 ? n3 : void 0 }, children: (0, import_jsx_runtime.jsx)(B, Object.assign({}, e4, { nodeData: a3, pathString: j(a3.path), styles: l2, canEdit: s3 })) }) });
};
var Se = { condition: ({ value: e4 }) => "string" == typeof e4 && /^https?:\/\/.+\..+$/.test(e4), element: Oe, showOnView: true, showOnEdit: false };
var Ne = { displayName: "Github Dark", styles: { container: { backgroundColor: "#0d1117", color: "white" }, dropZone: "rgba(165, 214, 255, 0.17)", property: "#E6EDF3", bracket: "#56d364", itemCount: "#8B949E", string: "#A5D6FF", number: "#D2A8FF", boolean: { color: "#FF7B72", fontSize: "90%", fontWeight: "bold" }, null: "green", iconCollection: "#D2A8FF", iconEdit: "#D2A8FF", iconDelete: "rgb(203, 75, 22)", iconAdd: "rgb(203, 75, 22)", iconCopy: "#A5D6FF", iconOk: "#56d364", iconCancel: "rgb(203, 75, 22)" } };
var xe = { displayName: "Github Light", styles: { container: "white", property: "#1F2328", bracket: "#00802e", itemCount: "#8B949E", string: "#0A3069", number: "#953800", boolean: { color: "#CF222E", fontSize: "90%", fontWeight: "bold" }, null: "#FF7B72", iconCollection: "#8250DF", iconEdit: "#8250DF", iconDelete: "rgb(203, 75, 22)", iconAdd: "#8250DF", iconCopy: "#57606A" } };
var Ae = { displayName: "Black & White", fragments: { lightText: { color: "white" }, midGrey: "#5c5c5c" }, styles: { container: ["lightText", { backgroundColor: "black" }], dropZone: "#e0e0e029", property: "lightText", bracket: "midGrey", itemCount: "#4a4a4a", string: "#a8a8a8", number: "#666666", boolean: { color: "#848484", fontStyle: "italic" }, null: "#333333", iconCollection: "midGrey", iconEdit: "midGrey", iconDelete: "midGrey", iconAdd: "midGrey", iconCopy: "midGrey", iconOk: "midGrey", iconCancel: "midGrey" } };
var Te = { fragments: { midGrey: "#a3a3a3" }, displayName: "White & Black", styles: { container: "white", property: "black", bracket: "midGrey", itemCount: "#b5b5b5", string: "#575757", number: "#999999", boolean: { color: "#7b7b7b", fontStyle: "italic" }, null: "#cccccc", iconCollection: "midGrey", iconEdit: "midGrey", iconDelete: "midGrey", iconAdd: "midGrey", iconCopy: "midGrey", iconOk: "midGrey", iconCancel: "midGrey" } };
var Re = { displayName: "Candy Wrapper", fragments: { minty: { backgroundColor: "#F1FAEE" }, pale: { color: "#A8DADC" }, mid: { color: "#457B9D" }, dark: { color: "#1D3557" }, pop: { color: "#E63946" }, darkBlue: { color: "#2B2D42" } }, styles: { container: "minty", property: "pop", dropZone: "#eb121217", bracket: "dark", itemCount: "pale", string: "mid", number: ["darkBlue", { fontSize: "85%" }], boolean: ["mid", { fontStyle: "italic", fontWeight: "bold", fontSize: "80%" }], null: ["#cccccc", { fontWeight: "bold" }], input: { border: "1px solid rgb(115, 194, 198)" }, iconCollection: "#1D3557", iconEdit: "#457B9D", iconDelete: "#E63946", iconAdd: "#2B2D42", iconCopy: "#1D3557", iconCancel: "#E63946" } };
var Ke = { displayName: "Psychedelic", fragments: { pale: { color: "#A8DADC" }, fluroYellow: "rgb(242, 228, 21)", fluroGreen: "rgb(68, 255, 62)", hotPink: "#f7379a" }, styles: { container: { backgroundColor: "unset", background: "linear-gradient(90deg, hsla(333, 100%, 53%, 1) 0%, hsla(33, 94%, 57%, 1) 100%)", color: "black" }, dropZone: "fluroYellow", property: "black", bracket: "fluroYellow", itemCount: ["pale", { opacity: 0.7 }], string: "white", number: ["#33d9ff", { fontSize: "90%", fontWeight: "bold" }], boolean: ["fluroGreen", { fontWeight: "bold", fontSize: "80%" }], null: ["black", { fontWeight: "bold", opacity: 0.3, backgroundColor: "rgb(255, 255, 255, 0.5)", padding: "0 0.4em", borderRadius: "0.4em" }], iconCollection: "fluroYellow", iconEdit: ["black"], iconDelete: ["white", { opacity: 0.5 }], iconAdd: ["white", { opacity: 0.5 }], iconCopy: "rgb(32, 84, 242)", iconOk: "fluroGreen", iconCancel: "hotPink" } };
export {
  $ as IconAdd,
  q as IconCancel,
  ee as IconChevron,
  X as IconCopy,
  Z as IconDelete,
  J as IconEdit,
  Q as IconOk,
  Ee as JsonEditor,
  Oe as LinkCustomComponent,
  Se as LinkCustomNodeDefinition,
  B as StringDisplay,
  o as assign,
  Re as candyWrapperTheme,
  x as defaultTheme,
  r2 as extract,
  Ne as githubDarkTheme,
  xe as githubLightTheme,
  m as isCollection,
  b as matchNode,
  v as matchNodeKey,
  Ae as monoDarkTheme,
  Te as monoLightTheme,
  Ke as psychedelicTheme,
  ie as standardDataTypes
};
//# sourceMappingURL=json-edit-react.js.map
